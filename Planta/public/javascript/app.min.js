var app=angular.module("PlantaAPP",["nvd3ChartDirectives","n3-line-chart","ngResource","ngRoute","angular-loading-bar",,"gantt","mgcrea.ngStrap","angularMoment","ngCookies"]),BaseTableController=function(a,b){a.current=0,a.total=0,a.rowsPage=10,a.totalRows=0,a.pages=[],a.next=function(){0!==a.current&&a.current--},a.previous=function(){a.total-1!==0&&a.current++},a.setPage=function(b){a.current=b},a.$watch("search",function(){a.current=0,a.filtered=b("filter")(a.items,a.search),a.total=Math.ceil(a.filtered.length/a.rowsPage),a.pages=[];for(var c=0;c>a.total;c++)a.pages.push(c)},!0),a.result=function(){return a.filtered.slice(a.current*a.rowsPage,(a.current+1)*a.rowsPage)},a.Init=function(){a.total=Math.ceil(a.items.length/a.rowsPage),a.totalRows=a.items.length,a.filtered=a.items;for(var b=0;b>a.total;b++)a.pages.push(b)}};app.controller("PruebasCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Ensambles.query(a.Init)}]),app.controller("PruebaCtrl",["$scope","PlantaServices","$routeParams","$filter",function(a,b,c,d){c.PruebaID&&(a.prueba=b.Ensambles.get({id:c.PruebaID})),a.canClose=function(){if(!a.prueba)return!1;var b=d("filter")(a.prueba.pruebas,{estatus:"AutorizadaSupervisor"});return 4===b.length},a.Aprobar=function(){b.Ensambles.Aprobar({id:a.prueba.id},function(){noty({text:"Aprobación de las pruebas con exito¡¡¡",type:"success"})},function(){noty({text:"Ocurrio  un error¡¡",type:"error"})})},a.Rechazar=function(){b.Ensambles.Rechazar({id:a.prueba.id},function(){noty({text:"Rechazo de las pruebas con exito¡¡¡",type:"success"})},function(){noty({text:"Ocurrio  un error¡¡",type:"error"})})}}]);var BaseController=function(a,b,c,d,e,f,g){a.OptionsControl={Locked:!0},a.log=[],a.Iteracion=[],a.$on("$locationChangeStart",function(b,c){a.Poller.$$intervalId&&(noty({text:"Desea cancelar la prueba?",modal:!0,closeWith:[],buttons:[{addClass:"btn btn-primary",text:"Ok",onClick:function(b){b.close(),a.Stop(),g.path(c)}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(a){a.close()}}]}),b.preventDefault())}),a.GetColor=function(a,b,c){var d=d3.mean([b,a]),e=Math.abs(d-c);e/=d-b;var f=d3.scale.linear().domain([0,.5,1]).range(["green","yellow","red"]);return f(e)},a.Init=function(){a.incidencias=e.Incidencias.query(),a.ensamble=e.Ensambles.get({id:d.EnsambleID},function(){a.valores=e.Pruebas.Valores({id:a.ensamble.planta.noSerie},function(){a.PruebaCarga=[{},{},{},{}];var b=0;for(b=0;4>b;b++){angular.copy(a.valores,a.PruebaCarga[b]);var c=.25*a.valores.Max.I1*(b+1),d=.25*a.valores.Min.I1*(b+1);a.PruebaCarga[b].Max.I2=c,a.PruebaCarga[b].Max.I1=c,a.PruebaCarga[b].Max.I3=c,a.PruebaCarga[b].Min.I2=d,a.PruebaCarga[b].Min.I1=d,a.PruebaCarga[b].Min.I3=d}a.PruebaCargaIndex=function(){return a.Iteraciones.current<2?a.Iteraciones.current:3}})})},a.Init(),a.Enable=function(){a.OptionsControl.Locked=!1},a.Disable=function(){a.OptionsControl.Locked=!0},a.Added=[],a.now=[],a.Poller={},a.RefreshTime=1,a.RefreshTimes=[1,5,30,60],a.Estatus={Waiting:{text:"En espera",value:0,color:"green"},Running:{text:"Corriendo...",value:1,color:"blue"},Error:{text:"Error",value:2,color:"red"}},a.Save=function(){a.prueba.ensamble=a.ensamble,a.prueba.$update()},a.Estado=a.Estatus.Waiting,a.AccumulateTime=0,a.intervalTime=1,a.lastMinute=[],a.Accumulate=[],a.options={series:[{y:"L1N",label:"L1-N",color:"#ff0000",type:"line",thickness:"1px"},{y:"L2N",label:"L2-N",color:"#64c900",type:"line",thickness:"1px"},{y:"L3N",label:"L3-N",color:"#428bca",type:"line",thickness:"1px"},{y:"I1",label:"I1",axis:"y2",color:"#4C2D73",type:"line",thickness:"1px"},{y:"I2",label:"I2",axis:"y2",color:"#FF7C00",type:"line",thickness:"1px"},{y:"I3",label:"I3",axis:"y2",color:"#FFFF00",type:"line",thickness:"1px"}],axes:{x:{type:"linear",key:"x"},y:{type:"linear"},y2:{type:"linear"}},lineMode:"bundle",tension:.7,tooltip:{mode:"scrubber"},drawLegend:!0,drawDots:!0,columnsHGap:5},a.optionsTemp={},angular.copy(a.options,a.optionsTemp),a.optionsTemp.series=[{y:"Temp",label:"Temp",color:"#ff0000",type:"line",thickness:"1px"},{y:"HZ",label:"HZ",axis:"y2",color:"#64c900",type:"line",thickness:"1px"}],a.CanAprove=!0,a.StopButton=function(){a.CanAprove=!1,a.Stop()},a.Stop=function(){a.ParoPlanta(),a.Estado=a.Estatus.Waiting,c.cancel(a.Poller),c.cancel(a.timer),a.Poller={},a.timer={},a.prueba&&(a.prueba.dtFin=new Date,a.prueba.estatus="Finalizada",a.prueba.ensamble={id:a.ensamble.id},a.prueba.$update())},a.ParoPlanta=function(){e.Plantas.Off({id:a.ensamble.id},{id:a.ensamble.id},function(){noty({text:"Apagado de planta exitoso¡¡¡",type:"success"})},function(){noty({text:"Error al apagar la planta la planta¡¡¡",type:"error"})})},a.AutoPlanta=function(){e.Plantas.Auto({id:a.ensamble.id},{id:a.ensamble.id},function(){noty({text:"Modo Automatico de planta exitoso¡¡¡",type:"success"})},function(){noty({text:"Error al colocar en  Automatico la planta¡¡¡",type:"error"})})},a.ArranquePlanta=function(){noty({text:"¿Esta seguro de encender la planta de Emergencia?",modal:!0,closeWith:[],buttons:[{addClass:"btn btn-primary",text:"Ok",onClick:function(b){b.close(),e.Plantas.On({id:a.ensamble.id},{id:a.ensamble.id},function(){noty({text:"Encendido de planta exitoso¡¡¡",type:"success"})},function(){noty({text:"Error al encender la planta¡¡¡",type:"error"})})}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(a){a.close()}}]})},a.Autoriza=function(){e.Pruebas.AutorizaE({id:a.prueba.id},{},function(){a.prueba.estatus=4,noty({text:"Aprobación con exito¡¡¡¡¡¡",type:"success"}),g.path("/Pruebas/"+a.ensamble.id)},function(){noty({text:"Ocurrio un error al realizar la operacion¡¡¡",type:"error"})})},a.Rechaza=function(){e.Pruebas.RechazaE({id:a.prueba.id},{},function(){a.prueba.estatus=3,noty({text:"Rechazo con exito¡¡¡¡¡¡",type:"success"}),g.path("/Pruebas/"+a.ensamble.id)},function(){noty({text:"Ocurrio un error al realizar la operacion¡¡¡",type:"error"})})},a.AutorizaS=function(){e.Pruebas.AutorizaS({id:a.prueba.id},{},function(){a.prueba.estatus=6,noty({text:"Aprobación con exito¡¡¡¡¡¡",type:"success"}),g.path("/Pruebas/"+a.ensamble.id)},function(){noty({text:"Ocurrio un error al realizar la operacion¡¡¡",type:"error"})})},a.RechazaS=function(){e.Pruebas.RechazaS({id:a.prueba.id},{},function(){a.prueba.estatus=5,noty({text:"Rechazo con exito¡¡¡¡¡¡",type:"success"}),g.path("/Pruebas/"+a.ensamble.id)},function(){noty({text:"Ocurrio un error al realizar la operacion¡¡¡",type:"error"})})},a.NowToLastMinute=function(){return(a.valores.Max.L1N<a.now.L1N||a.valores.Min.L1N>a.now.L1N)&&a.log.push(a.now.L1N),(a.valores.Max.L1N<a.now.L2N||a.valores.Min.L1N>a.now.L2N)&&a.log.push(a.now.L2N),(a.valores.Max.L1N<a.now.L3N||a.valores.Min.L1N>a.now.L3N)&&a.log.push(a.now.L3N),(a.valores.Max.HZ<a.now.HZ||a.valores.Min.HZ>a.now.HZ)&&a.log.push(a.now.HZ),a.valores.Max.Temp<a.now.Temp&&a.log.push(a.now.Temp),{x:a.AccumulateTime,L1N:a.now.L1N,L2N:a.now.L2N,L3N:a.now.L3N,I1:a.now.I1,I2:a.now.I2,I3:a.now.I3,HZ:a.now.HZ,Temp:a.now.Temp,RPM:a.now.RPM,MaxV:a.valores.Max.L1N,MinV:a.valores.Min.L1N}},a.Start=function(){noty({text:"¿Confirma el comienzo de la prueba",modal:!0,closeWith:[],buttons:[{addClass:"btn btn-primary",text:"Ok",onClick:function(b){b.close(),a.notyInit=noty({text:"Comenzando prueba en  ...",type:"success",modal:!0}),a.notyInit.count=5,a.intervalNoty=c(function(){a.notyInit.setText("Comenzando prueba en ... "+a.notyInit.count),a.notyInit.count--},1e3),f(function(){a.notyInit.close(),c.cancel(a.intervalNoty),a.Process()},5e3)}},{addClass:"btn btn-danger",text:"Cancel",onClick:function(a){a.close(),noty({text:"Cancelado",type:"error"})}}]})}};app.controller("PruebaSinCargaCtrl",["$scope","$http","$interval","$routeParams","PlantaServices","$location",function(a,b,c,d,e,f){BaseController.call(this,a,b,c,d,e,f),a.prueba=e.Pruebas.get({id:d.PruebaID}),a.options={series:[{y:"L1N",label:"L1-N",color:"#ff0000",type:"line",thickness:"1px"},{y:"L2N",label:"L2-N",color:"#64c900",type:"line",thickness:"1px"},{y:"L3N",label:"L3-N",color:"#428bca",type:"line",thickness:"1px"}],axes:{x:{type:"linear",key:"x"},y:{type:"linear"}},lineMode:"bundle",tension:.7,tooltip:{mode:"scrubber"},drawLegend:!0},a.optionsCorriente={series:[{y:"I1",label:"I1",color:"#ff0000",type:"line",thickness:"1px"},{y:"I2",label:"I2",color:"#64c900",type:"line",thickness:"1px"},{y:"I3",label:"I3",color:"#428bca",type:"line",thickness:"1px"}],axes:{x:{type:"linear",key:"x"},y:{type:"linear"}},lineMode:"bundle",tension:.7,tooltip:{mode:"scrubber"},drawLegend:!0},a.optionsPresion={series:[{y:"Presion",label:"Presion PSI",color:"#ff0000",type:"line",thickness:"1px"},{y:"RPM",label:"RPM",color:"#64c900",type:"line",thickness:"1px"},{y:"Temp",label:"Temp",color:"#428bca",type:"line",thickness:"1px"}],axes:{x:{type:"linear",key:"x"},y:{type:"linear"}},lineMode:"bundle",tension:.7,tooltip:{mode:"scrubber"},drawLegend:!0},a.optionsTemp={series:[{y:"Temp",label:"Temp °C",color:"#ff0000",type:"line",thickness:"1px"},{y:"HZ",label:"HZ",color:"#64c900",type:"line",thickness:"1px"},{y:"bateria",label:"C .Alt Volts",color:"#428bca",type:"line",thickness:"1px"}],axes:{x:{type:"linear",key:"x"},y:{type:"linear"}},lineMode:"bundle",tension:.7,tooltip:{mode:"scrubber"},drawLegend:!0},a.data=e.Pruebas.Lecturas({id:d.PruebaID},function(){a.max=Math.floor(a.data.length/60),a.min=0}),a.minute=1,a.$watch("minute",function(){var b=60*a.minute,c=0;if(a.lastMinute=[],a.data.length>=b+60)for(c=0;60>c;c++)a.lastMinute.push(a.data[c+b])})}]),app.controller("PruebaSinCargaController",["$scope","$http","$interval","$routeParams","PlantaServices","$timeout","$location",function(a,b,c,d,e,f,g){BaseController.call(this,a,b,c,d,e,f,g),a.Iteraciones={current:0,Iteracciones:[{No:1,Time:600,current:0}]},f(function(){a.valores.Max.I1=a.valores.Max.I2=a.valores.Max.I3=0,a.valores.Min.I1=a.valores.Min.I2=a.valores.Min.I3=0},1e3),a.Process=function(){a.Estado=a.Estatus.Running,a.data=[],a.Iteraciones.current=0,a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,a.prueba=new e.Pruebas({ensamble:{id:a.ensamble.id},tipo:0,estatus:"Ejecutando",dtInicio:new Date,dtFin:new Date,comentario:null,incidencias:null}),a.prueba.$save(function(){noty({text:"Comenzando Prueba de carga "}),a.timer=c(function(){if(a.prueba.dtFin=new Date,a.Iteraciones.Iteracciones[a.Iteraciones.current].current>=a.Iteraciones.Iteracciones[a.Iteraciones.current].Time){a.Iteraciones.current++;var b=a.now;if(b.index=a.Iteraciones.current,a.Accumulate.push(b),a.Iteraciones.Iteracciones.length===a.Iteraciones.current)return noty({text:"Terminando prueba¡¡¡",type:"success"}),a.Stop();a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,noty({text:"Comenzando Iteracion "+a.Iteraciones.current+"¡¡¡",type:"success"})}a.Iteraciones.Iteracciones[a.Iteraciones.current].alert&&a.Iteraciones.Iteracciones[a.Iteraciones.current].alert.time===a.Iteraciones.Iteracciones[a.Iteraciones.current].current&&noty({text:a.Iteraciones.Iteracciones[a.Iteraciones.current].alert.msg,type:"error"}),a.Iteraciones.Iteracciones[a.Iteraciones.current].current++,a.AccumulateTime++},1e3),a.Poller=c(function(){e.Pruebas.GetValues({id:a.prueba.id,seg:a.AccumulateTime,ite:a.Iteraciones.current,equipo:a.ensamble.carriles.equipo},function(b){a.now=b,a.now.time=a.Iteraciones.Iteracciones[a.Iteraciones.current].current,a.lastMinute.push(a.NowToLastMinute()),a.lastMinute.length>30/a.RefreshTime&&a.lastMinute.shift(),a.data.push({x:a.AccumulateTime,L1N:a.now.L1N,L2N:a.now.L2N,L3N:a.now.L3N})},function(){})},1e3*a.RefreshTime)},function(){a.Estado=a.Estatus.Waiting})}}]),app.controller("PruebaConCargaController",["$scope","$http","$interval","$routeParams","PlantaServices","$timeout","$location",function(a,b,c,d,e,f,g){BaseController.call(this,a,b,c,d,e,f,g),a.Accumulate=[],a.Iteraciones={current:0,Iteracciones:[{No:1,Time:60,current:0,alert:{msg:"Aumentar la carga a 50%¡¡¡",time:30}},{No:2,Time:60,current:0,alert:{msg:"Aumentar la carga a 75%¡¡¡",time:30}},{No:3,Time:60,current:0,alert:{msg:"Aumentar la carga a 100%¡¡¡",time:30}},{No:4,Time:60,current:0},{No:5,Time:600,current:0},{No:6,Time:600,current:0},{No:7,Time:600,current:0},{No:8,Time:600,current:0},{No:9,Time:600,current:0}]},a.Process=function(){a.Estado=a.Estatus.Running,a.data=[],a.Iteraciones.current=0,a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,a.prueba=new e.Pruebas({ensamble:{id:a.ensamble.id},tipo:1,estatus:"Ejecutando",dtInicio:new Date,dtFin:new Date}),a.prueba.$save(function(){noty({text:"Comenzando Prueba de carga "}),a.timer=c(function(){if(a.Iteraciones.Iteracciones[a.Iteraciones.current].current>=a.Iteraciones.Iteracciones[a.Iteraciones.current].Time){a.Iteraciones.current++;var b=a.now;if(b.index=a.Iteraciones.current,a.Accumulate.push(b),a.Iteraciones.Iteracciones.length===a.Iteraciones.current)return noty({text:"Terminando prueba¡¡¡",type:"success"}),a.Stop();a.Iteracion.push(new e.Iteraciones({id:a.now.id})),a.Iteracion[a.Iteraciones.current-1].$save(),a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,noty({text:"Comenzando Iteracion "+a.Iteraciones.current+"¡¡¡",type:"success"})}a.Iteraciones.Iteracciones[a.Iteraciones.current].alert&&a.Iteraciones.Iteracciones[a.Iteraciones.current].alert.time===a.Iteraciones.Iteracciones[a.Iteraciones.current].current&&noty({text:a.Iteraciones.Iteracciones[a.Iteraciones.current].alert.msg,type:"error"}),a.Iteraciones.Iteracciones[a.Iteraciones.current].current++,a.AccumulateTime++},1e3),a.Poller=c(function(){e.Pruebas.GetValues({id:a.prueba.id,seg:a.AccumulateTime,ite:a.Iteraciones.current,equipo:a.ensamble.carriles.equipo},function(b){a.now=b,a.now.time=a.Iteraciones.Iteracciones[a.Iteraciones.current].current,a.lastMinute.push(a.NowToLastMinute()),a.lastMinute.length>30/a.RefreshTime&&a.lastMinute.shift(),a.data.push({x:a.AccumulateTime,L1N:a.now.L1N,L2N:a.now.L2N,L3N:a.now.L3N})},function(){})},1e3*a.RefreshTime)},function(){a.Estado=a.Estatus.Waiting})}}]),app.controller("PruebaConCargaSubitaCtrl",["$scope","$http","$interval","$routeParams","PlantaServices","$timeout","$location",function(a,b,c,d,e,f,g){BaseController.call(this,a,b,c,d,e,f,g),a.Iteraciones={current:0,Iteracciones:[{No:1,Time:60,current:0},{No:2,Time:60,current:0},{No:3,Time:60,current:0}]},a.data={voltaje:[],hz:[]},a.Process=function(){a.Estado=a.Estatus.Running,a.data={voltaje:[],hz:[]},a.Iteraciones.current=0,a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,a.prueba=new e.Pruebas({ensamble:{id:a.ensamble.id},tipo:2,estatus:"Ejecutando",dtInicio:new Date,dtFin:new Date}),a.prueba.$save(function(){noty({text:"Comenzando Prueba de Carga Subita"}),a.timer=c(function(){if(a.now.L1N>=a.valores.Min.L1L2&&a.Iteraciones.Iteracciones[a.Iteraciones.current].active){var b=a.now;if(b.index=a.Iteraciones.current,a.Iteraciones.Iteracciones[a.Iteraciones.current].current,b.voltaje={max:0,min:0},b.hz={max:0,min:0},b.voltaje.max=_.max(a.data.voltaje),b.voltaje.min=_.min(a.data.voltaje),b.hz.max=_.max(a.data.hz),b.hz.min=_.min(a.data.hz),a.Accumulate.push(b),a.Iteraciones.current++,a.Iteraciones.Iteracciones.length===a.Iteraciones.current)return noty({text:"Terminando prueba¡¡¡",type:"success"}),a.Stop();a.data={voltaje:[],hz:[]},a.Iteraciones.Iteracciones[a.Iteraciones.current].current=0,noty({text:"Comenzando Iteracion "+a.Iteraciones.current+"¡¡¡",type:"success"})}a.Iteraciones.Iteracciones[a.Iteraciones.current].active||a.now.L1N>a.valores.Min.L1L2&&(a.Iteraciones.Iteracciones[a.Iteraciones.current].active=!0),a.Iteraciones.Iteracciones[a.Iteraciones.current].active&&(a.Iteraciones.Iteracciones[a.Iteraciones.current].current++,a.data.voltaje.push(a.now.L1N),a.data.hz.push(a.now.HZ)),a.AccumulateTime++},1e3),a.Poller=c(function(){e.Pruebas.GetValues({id:a.prueba.id,seg:a.AccumulateTime,ite:a.Iteraciones.current,equipo:a.ensamble.carriles.equipo},function(b){a.now=b,a.now.time=a.Iteraciones.Iteracciones[a.Iteraciones.current].current,a.lastMinute.push(a.NowToLastMinute()),a.lastMinute.length>30/a.RefreshTime&&a.lastMinute.shift()},function(){})},1e3)},function(){a.Estado=a.Estatus.Waiting})}}]),app.controller("PruebaControlCtrl",["$scope","$http","$interval","$routeParams","PlantaServices","$timeout","$location",function(a,b,c,d,e,f,g){BaseController.call(this,a,b,c,d,e,f,g),a.prueba=new e.Pruebascontrol({tipo:3,estatus:"Creada",dtInicio:new Date,dtFin:new Date}),a.GuardarPrueba=function(){a.prueba.ensamble={id:a.ensamble.id},a.prueba.estatus="Finalizada",a.prueba.id?a.prueba.$update(function(){},function(){}):a.prueba.$save(function(){},function(){})}}]),app.controller("PruebaControlViewCtrl",["$scope","$http","$interval","$routeParams","PlantaServices","$timeout","$location",function(a,b,c,d,e,f,g){BaseController.call(this,a,b,c,d,e,f,g),a.prueba=e.Pruebascontrol.get({id:d.PruebaID})}]),app.controller("EnsambleController",["$scope","PlantaServices","$filter","$location",function(a,b,c,d){a.motores=b.Motores.query(),a.tipoServicio=[{id:0,text:"Emergencia"},{id:1,text:"Continuo"}],a.tipoControl=[{id:0,text:"Intellite"},{id:1,text:"IntelliCompac"}],a.combustible=[{id:0,text:"Diesel"},{id:1,text:"Gasolina"}],a.carriles=b.Carriles.query(),a.searchOP=function(c){a.OPS=b.Produccion.GetByOP({noOP:c})},a.selectOp=function(b){a.planta.op=b,a.planta.noOp=b.op},a.SelectedMotor=function(){if(a.planta.motores){var b=c("filter")(a.motores,function(b){return b.modelo===a.planta.motores.modelo});return 0!==b.length?b[0]:void 0}},a.planta={},a.submit=function(){var c=new b.Plantas(a.planta);c.$save(function(){var e=new b.Ensambles({folio:"14PR000001",dtCreacion:new Date,planta:c,dtProgramada:a.ensamble.dtProgramada,cariles:a.ensamble.cariles,altitud:a.ensamble.altitud,patin:a.ensamble.patin,guardas:a.ensamble.guardas,rediador:a.ensamble.rediador,estatus:"Programada"});e.$save(function(){noty({text:"Planta registrada con el folio : "+e.folio+"¡¡¡",type:"success",modal:!0}),e.$QR({id:e.id},function(){d.path("/Pruebas/"+e.id)},function(){d.path("/Pruebas/"+e.id),noty({text:"Ocurrió un error al generar el QR",type:"error"})})},function(){c.$delete(function(){},function(){alert("Ocurrio un error")}),alert("Ocurrio un error")})},function(){alert("Ocurrio un error")})}}]),app.controller("NuevoArranqueCtrl",["$scope","PlantaServices","$filter","$location",function(a,b,c,d){a.motores=b.Plantas.query(),a.ubicaciones=b.Ubicaciones.query(),a.kits=b.Kits.query(),a.clientes=b.Clientes.query(),a.searchPlanta=function(c){a.plantas=b.Plantas.ByOP({noOP:c})},a.prueba=new b.EnsambleArranque({folio:"14PR000001",dtCreacion:new Date}),a.selectPlanta=function(b){a.prueba.planta=b},a.submit=function(){a.prueba.$save(function(){noty({text:"Prueba de arranque registrada con el folio : "+prueba.folio+"¡¡¡",type:"success",modal:!0}),d.path("/Pruebas/"+prueba.id)},function(){noty({text:"Ocurrio un error",type:"error"})})}}]),app.controller("PruebasArranqueCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.EnsambleArranque.query(a.Init)}]),app.controller("EnsambleArranqueCtrl",["$scope","PlantaServices","$routeParams","$filter",function(a,b,c,d){c.PruebaID&&(a.prueba=b.EnsambleArranque.get({id:c.PruebaID})),a.canClose=function(){if(!a.prueba.pruebaarranques)return!1;var b=d("filter")(a.prueba.pruebaarranques,{estatus:"AutorizadaSupervisor"});return 4===b.length},a.Aprobar=function(){b.EnsambleArranque.Aprobar(function(){},function(){})},a.Rechazar=function(){b.EnsambleArranque.Rechazar(function(){},function(){})}}]),app.controller("PruebaArranqueCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){b.prueba=new c.Arranques({dtInicio:new Date,dtFin:new Date,tipo:1,estatus:"Creada",ensamblearranque:{id:b.ensamble.id}})}),b.GuardarPrueba=function(){b.prueba.estatus="Finalizada",b.prueba.$save(function(){},function(){})}}]),app.controller("PruebaInstalacionCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){b.prueba=new c.Instalaciones({dtInicio:new Date,dtFin:new Date,tipo:0,estatus:0,ensamblearranque:{id:b.ensamble.id}})}),b.GuardarPrueba=function(){b.prueba.estatus=2,b.prueba.$save(function(){b.prueba.estatus=2},function(){})}}]),app.controller("PruebaVacioCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){b.prueba=new c.Vacios({dtInicio:new Date,dtFin:new Date,tipo:2,estatus:"Creada",ensamblearranque:{id:b.ensamble.id}})}),b.GuardarPrueba=function(){b.prueba.estatus="Finalizada",b.prueba.$save(function(){},function(){})}}]),app.controller("PruebaArranqueViewCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){}),b.prueba=new c.Arranques.get({id:a.PruebaID}),b.GuardarPrueba=function(){b.prueba.$save(function(){},function(){})}}]),app.controller("PruebaVacioViewCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){}),b.prueba=new c.Vacios.get({id:a.PruebaID}),b.GuardarPrueba=function(){b.prueba.$save(function(){},function(){})}}]),app.controller("PruebaInstalacionViewCtrl",["$routeParams","$scope","PlantaServices","$timeout",function(a,b,c){b.ensamble=c.EnsambleArranque.get({id:a.EnsambleID},function(){}),b.prueba=new c.Instalaciones.get({id:a.PruebaID}),b.GuardarPrueba=function(){b.prueba.$save(function(){},function(){})}}]),app.run(["$rootScope","PlantaServices","amMoment","$cookieStore","$location",function(a,b,c,d,e){c.changeLocale("es"),a.hasRole=function(b){return void 0===a.user?!1:void 0===a.user.roles[b]?!1:a.user.roles[b]},a.logout=function(){delete a.user,delete a.authToken,d.remove("authToken"),e.path("/login")};var f=e.path();e.path("/login");var g=d.get("authToken");void 0!==g&&(a.authToken=g,b.Usuarios.current(function(b){a.user=b,e.path("/login"===f?"/Pruebas":f)})),a.$on("$routeChangeStart",function(){}),a.initialized=!0}]),app.controller("MainCtrl",["$scope","$timeout","$log","Uuid","Sample","ganttMouseOffset","moment","PlantaServices",function(a,b,c,d,e){a.options={mode:"custom",scale:"day",maxHeight:!1,width:!1,autoExpand:"none",taskOutOfRange:"truncate",fromDate:void 0,toDate:void 0,showLabelsColumn:!0,currentDate:"line",currentDateValue:new Date,draw:!1,readOnly:!1,filterTask:void 0,filterRow:void 0,dateFrames:{weekend:{evaluator:function(a){return 6===a.isoWeekday()||7===a.isoWeekday()},targets:["weekend"]}},timeFramesNonWorkingMode:"visible",columnMagnet:"5 minutes",api:function(b){a.api=b,b.core.on.ready(a,function(){a.loadData([{id:"d868e42b-37e2-4d2c-b5a9-3f6d023ff94f",name:"Carril 3",tasks:[{id:"0fd04452-4a5f-4ac6-9434-370eb52e4311",from:"2014-11-04",to:14151672e5,name:"Planta OP017019",color:"green"}]},{id:"e687a093-7369-4ff1-9a56-f21c2b68a8d9",name:"Carril 5",tasks:[]}]),a.api.data.clear(),a.addSamples(),b.directives.on.destroy(a,function(a,b,c){"ganttRow"===a&&(c.off("mousedown",b.drawHandler),delete b.drawHandler)})})}},a.$watch("options.scale",function(b){"quarter"===b?(a.options.headersFormats={quarter:"[Q]Q YYYY"},a.options.headers=["quarter"]):(a.options.headersFormats=void 0,a.options.headers=void 0)}),a.addSamples=function(){a.api.timespans.load(e.getSampleTimespans().timespan1),e.getSample().success(function(b){a.loadData(b)})},a.loadData=function(b){a.api.data.load(b)}}]),app.controller("ProgramacionPruebasArranqueCtrl",["$scope","$timeout","$log","Uuid","Sample","ganttMouseOffset","moment","PlantaServices",function(a,b,c,d,e,f,g,h){a.options={mode:"custom",scale:"day",maxHeight:!1,width:!1,autoExpand:"none",taskOutOfRange:"truncate",fromDate:void 0,toDate:void 0,showLabelsColumn:!0,currentDate:"line",currentDateValue:new Date,draw:!1,readOnly:!1,filterTask:void 0,filterRow:void 0,dateFrames:{weekend:{evaluator:function(a){return 6===a.isoWeekday()||7===a.isoWeekday()},targets:["weekend"]}},timeFramesNonWorkingMode:"visible",columnMagnet:"5 minutes",api:function(b){a.api=b,b.core.on.ready(a,function(){a.loadData([{id:"d868e42b-37e2-4d2c-b5a9-3f6d023ff94f",name:"Carril 3",tasks:[{id:"0fd04452-4a5f-4ac6-9434-370eb52e4311",from:"2014-11-04",to:14151672e5,name:"Planta OP017019",color:"green"}]},{id:"e687a093-7369-4ff1-9a56-f21c2b68a8d9",name:"Carril 5",tasks:[]}]),a.api.data.clear(),a.addSamples(),b.directives.on.destroy(a,function(a,b,c){"ganttRow"===a&&(c.off("mousedown",b.drawHandler),delete b.drawHandler)})})}},a.$watch("options.scale",function(b){"quarter"===b?(a.options.headersFormats={quarter:"[Q]Q YYYY"},a.options.headers=["quarter"]):(a.options.headersFormats=void 0,a.options.headers=void 0)}),a.addSamples=function(){a.api.timespans.load(e.getSampleTimespans().timespan1),h.Planeacion.Arranques(function(b){a.loadData(b)})},a.loadData=function(b){a.api.data.load(b)}}]);var ControlPlantaCtrl=function(a){a.CarrilId={}};app.directive("controlplanta",function(){return{templateUrl:"/templates/directives/ControlPlanta.html"}}),app.directive("incidenciasctrl",function(){return{templateUrl:"/templates/directives/Incidencias.html"}}),app.directive("tableCtrl",function(){return{replace:!0,restrict:"EA",templateUrl:"/templates/directives/table.html"}}),app.directive("datosprueba",function(){return{replace:!0,restrict:"EA",templateUrl:"/templates/directives/DatosPrueba.html"}}),app.directive("tableCtrlCarga",function(){return{replace:!0,restrict:"EA",templateUrl:"/templates/directives/tablecarga.html"}}),app.directive("tableCtrlSubita",function(){return{replace:!0,restrict:"EA",templateUrl:"/templates/directives/tablesubita.html"}}),app.filter("minutos",function(){return function(a){a=a||0;var b=a%60,c=Math.floor(a/60),d=c.toString()+":"+(10>b?"0":"")+b.toString();return d}}),app.directive("check",function(){return{replace:!0,restrict:"EA",scope:{value:"=value"},template:'<div><span class="glyphicon glyphicon-ok success" ng-show="value === true"></span><span class="glyphicon glyphicon-remove bg-danger" ng-show="value === false"></span></div>'}}),app.directive("estatusPrueba",function(){return{replace:!0,restrict:"EA",scope:{value:"=value"},controller:["$scope",function(a){switch(a.msg="Desconocido",a.value){case"Creada":a.msg="Creada";
break;case"Ejecutando":a.msg="En curso";break;case"Finalizada":a.msg="Finalizada";break;case"RechazadaEjecutor":a.msg="Rechazada Ejecutor";break;case"AutorizadoEjecutor":a.msg="Autorizada Ejecutor";break;case"RechazadaSupervisor":a.msg="Rechazada Supervisor";break;case"AutorizadaSupervisor":a.msg="Autorizada Supervisor"}}],template:"<div><label >{{msg}}</label></div>"}}),app.directive("listPruebas",function(){return{replace:!0,restrict:"EA",scope:{prueba:"=prueba",url:"@url",urlview:"@urlview",tipo:"@tipo"},templateUrl:"/templates/directives/listPruebas.html"}}),app.directive("listPruebasArranque",function(){return{replace:!0,restrict:"EA",scope:{prueba:"=prueba",url:"@url",urlview:"@urlview",tipo:"@tipo"},templateUrl:"/templates/directives/listPruebasArranque.html"}}),app.directive("circle",function(){return{replace:!0,restrict:"EA",scope:{color:"=color"},template:"<div class='full-circle' ng-style='{\"background-color\": color}'><div>"}}),app.factory("EstatusPlanta",["$rootScope","PlantaServices",function(a,b){var c={};return c.ensamble=null,c.on=null,c.lastRead={},c.Paro=function(){b.Plantas.Off({id:$scope.ensamble.id},{id:$scope.ensamble.id},function(){noty({text:"Apagado de planta exitoso¡¡¡",type:"success"})},function(){noty({text:"Error al apagar la planta la planta¡¡¡",type:"error"})})},c.Arranque=function(){b.Plantas.On({id:$scope.ensamble.id},{id:$scope.ensamble.id},function(){noty({text:"Encendido de planta exitoso¡¡¡",type:"success"})},function(){noty({text:"Error al encender la planta¡¡¡",type:"error"})})},c}]),app.directive("autocomplete",["$timeout",function(a){return{restrict:"E",transclude:!0,replace:!0,template:'<div><form><input class="form-control" ng-model="term" ng-change="query()" type="text" autocomplete="off" /></form><div ng-transclude></div></div>',scope:{search:"&",select:"&",items:"=",term:"="},controller:["$scope",function(b){b.items=[],b.hide=!1,this.activate=function(a){b.active=a},this.activateNextItem=function(){var a=b.items.indexOf(b.active);this.activate(b.items[(a+1)%b.items.length])},this.activatePreviousItem=function(){var a=b.items.indexOf(b.active);this.activate(b.items[0===a?b.items.length-1:a-1])},this.isActive=function(a){return b.active===a},this.selectActive=function(){this.select(b.active)},this.select=function(a){b.hide=!0,b.focused=!0,b.select({item:a})},b.isVisible=function(){return!b.hide&&(b.focused||b.mousedOver)};var c;b.query=function(){(0|b.term.length)>2&&(c&&a.cancel(c),c=a(function(){b.hide=!1,b.search({term:b.term})},250))}}],link:function(b,c,d,e){var f=c.find("form > input"),g=c.find("> div");f.bind("focus",function(){b.$apply(function(){b.focused=!0})}),f.bind("blur",function(){b.$apply(function(){b.focused=!1})}),g.bind("mouseover",function(){b.$apply(function(){b.mousedOver=!0})}),g.bind("mouseleave",function(){b.$apply(function(){b.mousedOver=!1})}),f.bind("keyup",function(a){(9===a.keyCode||13===a.keyCode)&&b.$apply(function(){e.selectActive()}),27===a.keyCode&&b.$apply(function(){b.hide=!0})}),f.bind("keydown",function(a){(9===a.keyCode||13===a.keyCode||27===a.keyCode)&&a.preventDefault(),40===a.keyCode&&(a.preventDefault(),b.$apply(function(){e.activateNextItem()})),38===a.keyCode&&(a.preventDefault(),b.$apply(function(){e.activatePreviousItem()}))}),b.$watch("items",function(a){e.activate(a.length?a[0]:null)}),b.$watch("focused",function(b){b&&a(function(){f.focus()},0,!1)}),b.$watch("isVisible()",function(a){if(a){var b=f.position(),c=f[0].offsetHeight;g.css({top:b.top+c,left:b.left,position:"absolute",display:"block"})}else g.css("display","none")})}}}]),app.directive("itemautocomplete",function(){return{require:"^autocomplete",link:function(a,b,c,d){var e=a.$eval(c.itemautocomplete);a.$watch(function(){return d.isActive(e)},function(a){a?b.addClass("active"):b.removeClass("active")}),b.bind("mouseenter",function(){a.$apply(function(){d.activate(e)})}),b.bind("click",function(){a.$apply(function(){d.select(e)})})}}});var Routes=["$routeProvider","$httpProvider","$locationProvider",function(a,b){b.interceptors.push(function(a,b,c){return{responseError:function(d){var e=d.status,f=d.config,g=f.method,h=f.url;return 401===e?c.path("/login"):b.error=g+" on "+h+" failed with status "+e,a.reject(d)}}}),b.interceptors.push(function(a,b){return{request:function(c){var d=0!==c.url.indexOf("api");if(d&&angular.isDefined(b.authToken)){var e=b.authToken;console.log(b.authToken),c.headers.Authentication=e}return c||a.when(c)}}}),a.when("/NuevaPrueba",{templateUrl:"/templates/Ensamble/Nueva.html",controller:"EnsambleController"}).when("/Pruebas",{templateUrl:"/templates/Ensamble/Pruebas.html",controller:"PruebasCtrl"}).when("/Pruebas/:PruebaID",{templateUrl:"/templates/Ensamble/Prueba.html",controller:"PruebaCtrl"}).when("/PruebaSinCarga/:EnsambleID",{templateUrl:"/templates/PruebaSinCarga.html",controller:"PruebaSinCargaController"}).when("/PruebaSinCargaView/:EnsambleID/:PruebaID",{templateUrl:"/templates/PruebaSinCargaView.html",controller:"PruebaSinCargaCtrl"}).when("/PruebaConCargaView/:EnsambleID/:PruebaID",{templateUrl:"/templates/PruebaConCargaView.html",controller:"PruebaSinCargaCtrl"}).when("/PruebaConCarga/:EnsambleID",{templateUrl:"/templates/PruebaConCarga.html",controller:"PruebaConCargaController"}).when("/PruebaConCargaSubita/:EnsambleID",{templateUrl:"/templates/PruebaConCargaSubita.html",controller:"PruebaConCargaSubitaCtrl"}).when("/PruebaConCargaSubitaView/:EnsambleID/:PruebaID",{templateUrl:"/templates/PruebaSinCargaView.html",controller:"PruebaSinCargaCtrl"}).when("/Motores",{templateUrl:"/templates/Motores/Index.html",controller:"MotoresCtrl"}).when("/Motores/Edit",{templateUrl:"/templates/Motores/Edit.html",controller:"MotoresSaveCtrl"}).when("/Motores/Create",{templateUrl:"/templates/Motores/Create.html",controller:"MotoresSaveCtrl"}).when("/PruebaControl/:EnsambleID",{templateUrl:"/templates/PruebaControl.html",controller:"PruebaControlCtrl"}).when("/PruebaControlView/:EnsambleID/:PruebaID",{templateUrl:"/templates/PruebaControlView.html",controller:"PruebaControlViewCtrl"}).when("/Usuarios",{templateUrl:"/templates/Usuarios/Index.html",controller:"UsuariosCtrl"}).when("/Usuarios/Edit/:id",{templateUrl:"/templates/Usuarios/Edit.html",controller:"UsuariosSaveCtrl"}).when("/Usuarios/Create",{templateUrl:"/templates/Usuarios/Create.html",controller:"UsuariosSaveCtrl"}).when("/Carriles",{templateUrl:"/templates/Carriles/Index.html",controller:"CarrilesCtrl"}).when("/Carriles/Edit/:id",{templateUrl:"/templates/Carriles/Edit.html",controller:"CarrilesSaveCtrl"}).when("/Carriles/Create",{templateUrl:"/templates/Carriles/Create.html",controller:"CarrilesSaveCtrl"}).when("/Ubicaciones",{templateUrl:"/templates/Ubicaciones/Index.html",controller:"UbicacionesCtrl"}).when("/Ubicaciones/Edit/:id",{templateUrl:"/templates/Ubicaciones/Edit.html",controller:"UbicacionesSaveCtrl"}).when("/Ubicaciones/Create",{templateUrl:"/templates/Ubicaciones/Create.html",controller:"UbicacionesSaveCtrl"}).when("/Clientes",{templateUrl:"/templates/Clientes/Index.html",controller:"ClientesCtrl"}).when("/Clientes/Edit/:id",{templateUrl:"templates/Clientes/Edit.html",controller:"ClientesSaveCtrl"}).when("/Clientes/Create",{templateUrl:"/templates/Clientes/Create.html",controller:"ClientesSaveCtrl"}).when("/NuevoArranque",{templateUrl:"/templates/EnsambleArranque/Nueva.html",controller:"NuevoArranqueCtrl"}).when("/PruebasArranque",{templateUrl:"/templates/EnsambleArranque/Pruebas.html",controller:"PruebasArranqueCtrl"}).when("/PruebasArranque/:PruebaID",{templateUrl:"/templates/EnsambleArranque/Prueba.html",controller:"EnsambleArranqueCtrl"}).when("/PruebaArranque/:EnsambleID",{templateUrl:"/templates/Pruebas/Arranque.html",controller:"PruebaArranqueCtrl"}).when("/PruebaArranqueView/:EnsambleID/:PruebaID",{templateUrl:"/templates/Pruebas/ArranqueView.html",controller:"PruebaArranqueViewCtrl"}).when("/PruebaInstalacion/:EnsambleID",{templateUrl:"/templates/Pruebas/Instalacion.html",controller:"PruebaInstalacionCtrl"}).when("/PruebaInstalacionView/:EnsambleID/:PruebaID",{templateUrl:"/templates/Pruebas/InstalacionView.html",controller:"PruebaInstalacionViewCtrl"}).when("/PruebaVacio/:EnsambleID",{templateUrl:"/templates/Pruebas/Vacio.html",controller:"PruebaVacioCtrl"}).when("/PruebaVacioView/:EnsambleID/:PruebaID",{templateUrl:"/templates/Pruebas/VacioView.html",controller:"PruebaVacioViewCtrl"}).when("/ProgramacionPruebasEnsamble",{templateUrl:"/templates/Ensamble/Programacion.html",controller:"MainCtrl"}).when("/ProgramacionPruebasArranque",{templateUrl:"/templates/EnsambleArranque/Programacion.html",controller:"ProgramacionPruebasArranqueCtrl"}).when("/login",{templateUrl:"/templates/login/login.html",controller:LoginController}).otherwise({redirectTo:"/Pruebas"})}];app.config(Routes);var services=["PlantaServices",["$resource",function(a){var b="http://localhost/api/",c={};return c.Plantas=a(b+"Planta/:noSerie",{},{On:{method:"get",url:b+"Planta/On/:id"},Off:{method:"get",url:b+"Planta/Off/:id"},Auto:{method:"get",url:b+"Planta/Auto/:id"},ByOP:{method:"GET",url:b+"Planta/ByOp",isArray:!0}}),c.Carriles=a(b+"Carriles/:id",{},{update:{method:"PUT"}}),c.Kits=a(b+"Kits/:id",{},{update:{method:"PUT"}}),c.Motores=a(b+"Motores/:modelo",{},{update:{method:"PUT"},get:{method:"GET",url:b+"Motores/Get"}}),c.Ensambles=a(b+"Ensambles/:id",{},{Aprobar:{url:b+"/Ensambles/Aprobar/:id",method:"get"},Rechazar:{url:b+"/Ensambles/Rechazar/:id",method:"get"},QR:{url:b+"/Ensambles/QR/:id",method:"get"}}),c.Roles=a(b+"Roles/:id",{},{}),c.Iteraciones=a(b+"Iteraciones/:id",{},{}),c.EnsambleArranque=a(b+"EnsambleArranque/:id",{},{save:{method:"post",url:b+"EnsambleArranque/Create"}}),c.Pruebasarranque=a(b+"Pruebasarranque/:id",{},{}),c.Instalaciones=a(b+"Instalaciones/:id",{},{}),c.Arranques=a(b+"Arranque/:id",{},{}),c.Vacios=a(b+"Vacio/:id",{},{}),c.Pruebascontrol=a(b+"Pruebacontrol/:id",{},{}),c.Pruebas=a(b+"Pruebas/:id",{},{GetValues:{url:b+"Planta/GetValues/:id/:seg/:ite/:equipo"},Valores:{url:b+"Planta/Valores/:id"},update:{method:"PUT"},Lecturas:{url:b+"Pruebas/Lecturas/:id",isArray:!0},AutorizaE:{method:"POST",url:b+"Pruebas/AutorizarE/:id"},RechazaE:{method:"POST",url:b+"Pruebas/RechazarE/:id"},AutorizaS:{method:"POST",url:b+"Pruebas/AutorizarS/:id"},RechazaS:{method:"POST",url:b+"Pruebas/RechazarS/:id"},Control:{method:"POST",url:b+"Pruebacontrol"},Aprueba:{method:"POST",url:b+"Pruebas/Aprobar/:id"},Rechazar:{method:"POST",url:b+"Pruebas/Rechazar/:id"}}),c.Incidencias=a(b+"Incidencias/:id",{},{update:{method:"PUT"}}),c.Usuarios=a(b+"Usuarios/:id",{},{update:{method:"PUT"},current:{method:"get",url:b+"Usuarios/getDataUser"}}),c.Clientes=a(b+"Clientes/:id",{},{update:{method:"PUT"}}),c.Ubicaciones=a(b+"Ubicaciones/:id",{},{update:{method:"PUT"}}),c.Produccion=a(b+"Produccion/:id",{},{GetByOP:{method:"GET",url:b+"Produccion/ByOp",isArray:!0}}),c.Planeacion=a(b+"GanttEnsamble/:id",{},{Arranques:{url:b+"GanttEnsamble/Arranques",method:"get",isArray:!0}}),c.UserService=a(b+"Usuarios/:action",{},{authenticate:{method:"POST",params:{action:"authenticate"},headers:{"Content-Type":"application/x-www-form-urlencoded"}}}),c}]];app.factory(services[0],services[1]),app.service("Sample",function(a){return{getSample:function(){return a.get("/api/GanttEnsamble")},getSampleData:function(){return{data1:[{id:"2f85dbeb-0845-404e-934e-218bf39750c0",name:"Carril 1",order:0,height:"3em",classes:"gantt-row-milestone",color:"#45607D",tasks:[{id:"f55549b5-e449-4b0c-9f4b-8b33381f7d76",name:"Planta  OP01091",color:"#93C47D",from:"2013-10-07T09:00:00",to:"2013-10-07T10:00:00",data:"Can contain any custom data or object"},{id:"5e997eb3-4311-46b1-a1b4-7e8663ea8b0b",name:"Planta  OP01091",color:"#93C47D",from:new Date(2013,9,18,18,0,0),to:new Date(2013,9,18,18,0,0),est:new Date(2013,9,16,7,0,0),lct:new Date(2013,9,19,0,0,0)},{id:"b6a1c25c-85ae-4991-8502-b2b5127bc47c",name:"Planta  OP01091",color:"#93C47D",from:new Date(2013,10,15,18,0,0),to:new Date(2013,10,15,18,0,0)}],data:"Can contain any custom data or object"},{id:"b8d10927-cf50-48bd-a056-3554decab824",name:"Carril 2",order:1,tasks:[{id:"301d781f-1ef0-4c35-8398-478b641c0658",name:"Planta  OP0103213",color:"#9FC5F8",from:new Date(2013,9,25,15,0,0),to:new Date(2013,9,25,18,30,0)},{id:"0fbf344a-cb43-4b20-8003-a789ba803ad8",name:"Planta  OP01DA31",color:"#9FC5F8",from:new Date(2013,10,1,15,0,0),to:new Date(2013,10,1,18,0,0)}]},{id:"c65c2672-445d-4297-a7f2-30de241b3145",name:"Carril 3",order:2,tasks:[{id:"4e197e4d-02a4-490e-b920-4881c3ba8eb7",name:"Planta  OP0DADA",color:"#9FC5F8",from:new Date(2013,9,7,9,0,0),to:new Date(2013,9,7,17,0,0),progress:{percent:100,color:"#3C8CF8"}},{id:"451046c0-9b17-4eaf-aee0-4e17fcfce6ae",name:"Planta  OP0DFSFDS",color:"#9FC5F8",from:new Date(2013,9,8,9,0,0),to:new Date(2013,9,8,17,0,0),progress:{percent:100,color:"#3C8CF8"}},{id:"fcc568c5-53b0-4046-8f19-265ebab34c0b",name:"Planta  ODSA091",color:"#9FC5F8",from:new Date(2013,9,9,8,30,0),to:new Date(2013,9,9,12,0,0),progress:{percent:100,color:"#3C8CF8"}}]},{id:"dd2e7a97-1622-4521-a807-f29960218785",name:"Carril 4",order:3,tasks:[]},{id:"eede0c9a-6777-4b55-9359-1eada309404e",name:"Carril 5",order:4,tasks:[]}]}},getSampleTimespans:function(){return{timespan1:[{id:"1",from:new Date(2014,11,1,8,0,0),to:new Date(2014,11,12,15,0,0),name:"Sprint 1 Timespan"}]}}}}),app.service("Uuid",function(){return{s4:function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},randomUuid:function(){return this.s4()+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+"-"+this.s4()+this.s4()+this.s4()}}});
function LoginController(a,b,c,d,e){a.rememberMe=!1,a.login=function(){e.UserService.authenticate($.param({username:a.username,password:a.password}),function(f){var g=f.token;b.authToken=g,a.rememberMe&&d.put("authToken",g),e.Usuarios.current(function(a){b.user=a,c.path("/")})})}}app.controller("IncidenciasCtrl",["$scope","PlantaServices","$routeParams","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Incidencias.query(a.Init),a.Delete=function(c){b.Incidencias.delete({id:c.id},function(){a.incidencias.pop(c)},function(){})}}]),app.controller("IncidenciasSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.incidencia=new b.Incidencias,void 0!==c.IncidenciaID&&a.incidencia.$get({id:c.IncidenciaID}),a.Save=function(){a.incidencia.$save(function(){c.IncidenciaID||d.path("/Incidencias/Edit/"+a.incidencia.id)},function(){})},a.Update=function(){a.incidencia.$save(function(){},function(){})},a.Delete=function(){a.incidencia.$delete(function(){d.path("/Incidencias")},function(){})}}]),app.controller("MotoresCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Motores.query(a.Init),a.Delete=function(c){b.Motores.delete({modelo:c.modelo},function(){a.incidencias.pop(c)},function(){})}}]),app.controller("MotoresSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.motor=new b.Motores,void 0!==c.modelo&&a.motor.$get({modelo:c.modelo}),a.Save=function(){a.motor.$save(function(){c.modelo||d.path("/Motores/Edit/"+a.motor.id)},function(){})},a.Update=function(){a.motor.$update(function(){},function(){})},a.Delete=function(){a.motor.$delete(function(){d.path("/Motores")},function(){})}}]),app.controller("UsuariosCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Usuarios.query(a.Init),a.Delete=function(c){b.Usuarios.delete({id:c.id},function(){a.usuario.pop(c)},function(){})}}]),app.controller("UsuariosSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.usuario=new b.Usuarios,void 0!==c.id&&a.usuario.$get({id:c.id}),a.roles=b.Roles.query(),a.Save=function(){a.usuario.$save(function(){c.id||d.path("/Usuarios/Edit/"+a.usuario.id)},function(){})},a.Update=function(){a.usuario.$update(function(){},function(){})},a.Delete=function(){a.usuario.$delete(function(){d.path("/Usuarios")},function(){})}}]),app.controller("CarrilesCtrl",["$scope","PlantaServices","$routeParams",function(a,b){a.carriles=b.Carriles.query(),a.Delete=function(c){b.Carriles.delete({id:c.id},function(){a.carriles.pop(c)},function(){})}}]),app.controller("CarrilesSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.carril=new b.Carriles,void 0!==c.id&&a.carril.$get({id:c.id}),a.Save=function(){a.carril.$save(function(){c.id||d.path("/Carriles/Edit/"+a.carril.id)},function(){})},a.Update=function(){a.carril.$update(function(){},function(){})},a.Delete=function(){a.carril.$delete(function(){d.path("/Carriles")},function(){})}}]),app.controller("UbicacionesCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.clientes=b.Clientes.query(),a.items=b.Ubicaciones.query(a.Init),a.Delete=function(c){b.Ubicaciones.delete({id:c.id},function(){a.ubicacion.pop(c)},function(){})}}]),app.controller("UbicacionesSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.clientes=b.Clientes.query(),a.ubicacion=new b.Ubicaciones,void 0!==c.id&&a.ubicacion.$get({id:c.id}),a.Save=function(){a.ubicacion.$save(function(){c.id||d.path("/Ubicaciones/Edit/"+a.ubicacion.id)},function(){})},a.Update=function(){a.ubicacion.$update(function(){},function(){})},a.Delete=function(){a.ubicacion.$delete(function(){d.path("/Ubicaciones")},function(){})}}]),app.controller("ClientesCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Clientes.query(a.Init),a.Delete=function(c){b.Clientes.delete({id:c.id},function(){a.cliente.pop(c)},function(){})}}]),app.controller("ClientesSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.cliente=new b.Clientes,void 0!==c.id&&a.cliente.$get({id:c.id}),a.Save=function(){a.cliente.$save(function(){c.id||d.path("/Clientes/Edit/"+a.cliente.id)},function(){})},a.Update=function(){a.cliente.$update(function(){},function(){})},a.Delete=function(){a.cliente.$delete(function(){d.path("/Clientes")},function(){})}}]),app.controller("KitsCtrl",["$scope","PlantaServices","$filter",function(a,b,c){BaseTableController.call(this,a,c),a.items=b.Kits.query(a.Init),a.Delete=function(c){b.Kits.delete({id:c.id},function(){a.kites.pop(c)},function(){})}}]),app.controller("KitsSaveCtrl",["$scope","PlantaServices","$routeParams","$location",function(a,b,c,d){a.kit=new b.Kits,void 0!==c.id&&a.kit.$get({id:c.id}),a.Save=function(){a.kit.$save(function(){c.id||d.path("/Kits/Edit/"+a.kit.id)},function(){})},a.Update=function(){a.kit.$update(function(){},function(){})},a.Delete=function(){a.kit.$delete(function(){d.path("/Kits")},function(){})}}]);var Routes=["$routeProvider",function(a){a.when("/Incidencias",{templateUrl:"/templates/Incidencias/Index.html",controller:"IncidenciasCtrl"}).when("/Incidencias/Edit/:IncidenciaID",{templateUrl:"/templates/Incidencias/Edit.html",controller:"IncidenciasSaveCtrl"}).when("/Incidencias/Create",{templateUrl:"/templates/Incidencias/Edit.html",controller:"IncidenciasSaveCtrl"}).when("/Kits",{templateUrl:"/templates/Kits/Index.html",controller:"KitsCtrl"}).when("/Kits/Edit/:id",{templateUrl:"/templates/Kits/Edit.html",controller:"KitsSaveCtrl"}).when("/Kits/Create",{templateUrl:"/templates/Kits/Create.html",controller:"KitsSaveCtrl"}).otherwise({redirectTo:"/Pruebas"})}];app.config(Routes);
//# sourceMappingURL=app.map