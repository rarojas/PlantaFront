/*! angular-gantt 11-11-2014 */


"use strict";var gantt=angular.module("gantt",["gantt.templates","angularMoment"]);gantt.directive("gantt",["Gantt","ganttOptions","GanttCalendar","moment","ganttMouseOffset","ganttDebounce","ganttEnableNgAnimate",function(a,b,c,d,e,f,g){return{restrict:"EA",transclude:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.gantt.tmpl.html":b.templateUrl},scope:{sortMode:"=?",filterTask:"=?",filterTaskComparator:"=?",filterRow:"=?",filterRowComparator:"=?",viewScale:"=?",columnWidth:"=?",allowLabelsResizing:"=?",fromDate:"=?",toDate:"=?",currentDateValue:"=?",currentDate:"=?",autoExpand:"=?",taskOutOfRange:"=?",maxHeight:"=?",labelsWidth:"=?",showLabelsColumn:"=?",showTooltips:"=?",headers:"=?",headersFormats:"=?",timeFrames:"=?",dateFrames:"=?",timeFramesWorkingMode:"=?",timeFramesNonWorkingMode:"=?",tooltipDateFormat:"=?",timespans:"=?",columnMagnet:"=?",data:"=?",api:"=?",options:"=?"},controller:["$scope","$element",function(c,d){for(var e in c.options)c[e]=c.options[e];b.initialize(c),g(!1,d),c.gantt=new a(c,d),this.gantt=c.gantt}],link:function(a,b){a.gantt.api.core.raise.ready(a.gantt.api),a.gantt.api.directives.raise.new("gantt",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("gantt",a,b)})}}}]),function(){angular.module("gantt").factory("GanttApi",["$q","$rootScope","ganttUtils",function(a,b,c){function d(a,b,c,d){return a.$on(b,function(){var a=Array.prototype.slice.call(arguments);a.splice(0,1),c.apply(d.api,a)})}var e=function(a){this.gantt=a,this.listeners=[],this.apiId=c.newId()};return e.prototype.suppressEvents=function(a,b){var c=this,e=angular.isArray(a)?a:[a],f=[];e.forEach(function(a){f=c.listeners.filter(function(b){return a===b.handler})}),f.forEach(function(a){a.dereg()}),b(),f.forEach(function(a){a.dereg=d(a.scope,a.eventId,a.handler,c.gantt)})},e.prototype.registerEvent=function(a,c){var e=this;e[a]||(e[a]={});var f=e[a];f.on||(f.on={},f.raise={});var g="event:gantt:"+this.apiId+":"+a+":"+c;f.raise[c]=function(){b.$broadcast.apply(b,[g].concat(Array.prototype.slice.call(arguments)))},f.on[c]=function(a,b){var c=d(a,g,b,e.gantt),f={handler:b,dereg:c,eventId:g,scope:a};e.listeners.push(f),a.$on("$destroy",function(){f.dereg=null,f.handler=null,f.eventId=null,f.scope=null})}},e.prototype.registerEventsFromObject=function(a){var b=this,c=[];angular.forEach(a,function(a,b){var d={name:b,events:[]};angular.forEach(a,function(a,b){d.events.push(b)}),c.push(d)}),c.forEach(function(a){a.events.forEach(function(c){b.registerEvent(a.name,c)})})},e.prototype.registerMethod=function(a,b,d,e){this[a]||(this[a]={});var f=this[a];f[b]=c.createBoundedWrapper(e||this.gantt,d)},e.prototype.registerMethodsFromObject=function(a,b){var c=this,d=[];angular.forEach(a,function(a,b){var c={name:b,methods:[]};angular.forEach(a,function(a,b){c.methods.push({name:b,fn:a})}),d.push(c)}),d.forEach(function(a){a.methods.forEach(function(d){c.registerMethod(a.name,d.name,d.fn,b)})})},e}])}(),gantt.factory("ganttOptions",["moment",function(a){return{initialize:function(b){return b.api=b.api||angular.noop(),b.data=b.data||[],b.timespans=b.timespans||[],b.sortMode=b.sortMode||"name",b.filterTask=b.filterTask||void 0,b.filterTaskComparator=b.filterTaskComparator||void 0,b.filterRow=b.filterRow||void 0,b.filterRowComparator=b.filterRowComparator||void 0,b.viewScale=b.viewScale||"day",b.columnMagnet=b.columnMagnet||"15 minutes",b.columnWidth=b.columnWidth||void 0,b.fromDate=b.fromDate||void 0,b.toDate=b.toDate||void 0,b.allowLabelsResizing=void 0!==b.allowLabelsResizing?!!b.allowLabelsResizing:!0,b.currentDate=b.currentDate||"line",b.currentDateValue=b.currentDateValue||a(),b.autoExpand=b.autoExpand||"none",b.taskOutOfRange=b.taskOutOfRange||"truncate",b.maxHeight=b.maxHeight||0,b.labelsWidth=b.labelsWidth||void 0,b.showLabelsColumn=void 0!==b.showLabelsColumn?!!b.showLabelsColumn:!0,b.showTooltips=void 0!==b.showTooltips?!!b.showTooltips:!0,b.headers=b.headers||void 0,b.headersFormats=b.headersFormats||void 0,b.timeFrames=b.timeFrames||[],b.dateFrames=b.dateFrames||[],b.timeFramesWorkingMode=b.timeFramesWorkingMode||"hidden",b.timeFramesNonWorkingMode=b.timeFramesNonWorkingMode||"visible",b.tooltipDateFormat=b.tooltipDateFormat||"MMM DD, HH:mm",b}}}]),gantt.factory("GanttCalendar",["$filter",function(a){var b=function(a){void 0===a&&(a={}),this.start=a.start,this.end=a.end,this.working=a.working,this.default=a.default,this.color=a.color,this.classes=a.classes};b.prototype.getDuration=function(){return this.end.diff(this.start,"milliseconds")},b.prototype.clone=function(){return new b(this)};var c=function(a){this.func=a};c.prototype.getTimeFrames=function(a){var b=this.func(a);return b instanceof Array||(b=[b]),b},c.prototype.clone=function(){return new c(this.func)};var d=function(a){this.evaluator=a.evaluator,a.date?(this.start=moment(a.date).startOf("day"),this.end=moment(a.date).endOf("day")):(this.start=a.start,this.end=a.end),this.targets=a.targets instanceof Array?a.targets:[a.targets],this.default=a.default};d.prototype.dateMatch=function(a){return this.evaluator?this.evaluator(a):this.start&&this.end?a>=this.start&&a<=this.end:!1},d.prototype.clone=function(){return new d(this)};var e=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}};e.prototype.clear=function(){this.timeFrames={},this.timeFrameMappings={},this.dateFrames={}},e.prototype.registerTimeFrames=function(a){angular.forEach(a,function(a,c){this.timeFrames[c]=new b(a)},this)},e.prototype.removeTimeFrames=function(a){angular.forEach(a,function(a){delete this.timeFrames[a]},this)},e.prototype.clearTimeFrames=function(){this.timeFrames={}},e.prototype.registerTimeFrameMappings=function(a){angular.forEach(a,function(a,b){this.timeFrameMappings[b]=new c(a)},this)},e.prototype.removeTimeFrameMappings=function(a){angular.forEach(a,function(a){delete this.timeFrameMappings[a]},this)},e.prototype.clearTimeFrameMappings=function(){this.timeFrameMappings={}},e.prototype.registerDateFrames=function(a){angular.forEach(a,function(a,b){this.dateFrames[b]=new d(a)},this)},e.prototype.removeDateFrames=function(a){angular.forEach(a,function(a){delete this.dateFrames[a]},this)},e.prototype.clearDateFrames=function(){this.dateFrames={}};var f=function(a,b){var c=[];return angular.forEach(a,function(a){a.dateMatch(b)&&c.push(a)}),0===c.length&&angular.forEach(a,function(a){a.default&&c.push(a)}),c};return e.prototype.getTimeFrames=function(a){var b=[],c=f(this.dateFrames,a);angular.forEach(c,function(a){void 0!==a&&angular.forEach(a.targets,function(a){var c=this.timeFrameMappings[a];if(void 0!==c)b.push(c.getTimeFrames());else{var d=this.timeFrames[a];void 0!==d&&b.push(d)}},this)},this);var d=a.year(),e=a.month(),g=a.date(),h=[];return 0===b.length&&angular.forEach(this.timeFrames,function(a){a.default&&b.push(a)}),angular.forEach(b,function(a){a=a.clone(),void 0!==a.start&&(a.start.year(d),a.start.month(e),a.start.date(g)),void 0!==a.end&&(a.end.year(d),a.end.month(e),a.end.date(g),moment(a.end).startOf("day")===a.end&&a.end.add(1,"day")),h.push(a)}),h},e.prototype.solve=function(c,d,e){var f,g,h,i,j=0===c.length;angular.forEach(c,function(a){(void 0===h||h>a.start)&&(h=a.start),(void 0===i||i<a.end)&&(i=a.end),void 0===f&&a.color&&(f=a.color),void 0!==a.classes&&(void 0===g&&(g=[]),g=g.concat(a.classes))}),void 0===d&&(d=h),void 0===e&&(e=i);var k=[new b({start:d,end:e,working:j,color:f,classes:g})],l=a("orderBy")(c,function(a){return-a.getDuration()});return angular.forEach(l,function(a){var b=k.slice(),c=0,d=!1,e=!1;angular.forEach(k,function(f){if(!e){if(a.end>f.start&&a.start<f.end){a=a.clone();var g=f.clone();f.end=moment(a.start),g.start=moment(a.end),b.splice(c+1,0,a.clone(),g),e=!0}else!d&&a.start<f.end?(a=a.clone(),f.end=moment(a.start),b.splice(c+1,0,a),d=!0):d&&a.end>f.start&&(f.start=moment(a.end),d=!1,e=!0);c++}}),k=b}),k=a("filter")(k,function(a){return(void 0===a.start||a.start<e)&&(void 0===a.end||a.end>d)})},e}]),gantt.factory("GanttCurrentDateManager",[function(){var a=function(a){var b=this;this.gantt=a,this.date=void 0,this.position=void 0,this.currentDateColumn=void 0,this.gantt.$scope.$watchGroup(["currentDate","currentDateValue"],function(){b.setCurrentDate(b.gantt.$scope.currentDateValue)})};return a.prototype.setCurrentDate=function(a){if(this.date=a,void 0!==this.currentDateColumn&&(this.currentDateColumn.currentDate=void 0,delete this.currentDateColumn),void 0!==this.date){var b=this.gantt.columnsManager.getColumnByDate(this.date);void 0!==b&&(b.currentDate=this.date,this.currentDateColumn=b)}this.position=this.gantt.getPositionByDate(this.date)},a}]),gantt.factory("GanttColumn",["moment",function(a){var b=function(a,b,c,d,e,f,g,h,i){this.date=a,this.endDate=b,this.left=c,this.width=d,this.calendar=e,this.duration=this.endDate.diff(this.date,"milliseconds"),this.timeFramesWorkingMode=f,this.timeFramesNonWorkingMode=g,this.timeFrames=[],this.visibleTimeFrames=[],this.daysTimeFrames={},this.cropped=!1,this.columnMagnetValue=h,this.columnMagnetUnit=i,this.originalSize={left:this.left,width:this.width},this.updateTimeFrames()},c=function(a){return a.year()+"-"+a.month()+"-"+a.date()};b.prototype.updateTimeFrames=function(){var b=this;if(void 0!==b.calendar&&("hidden"!==b.timeFramesNonWorkingMode||"hidden"!==b.timeFramesWorkingMode)){for(var d=function(c,d,e){return function(f){var g=f.start;void 0===g&&(g=d);var h=f.end;void 0===h&&(h=e),g<b.date&&(g=b.date),h>b.endDate&&(h=b.endDate),f=f.clone(),f.start=a(g),f.end=a(h),c.push(f)}},e=b.date,f=a(e).startOf("day"),g=f.add(1,"day");e<b.endDate;){var h=b.calendar.getTimeFrames(e),i=a.min(g,b.endDate);h=b.calendar.solve(h,e,i);var j=[];angular.forEach(h,d(j,e,i)),b.timeFrames=b.timeFrames.concat(j);var k=c(e);b.daysTimeFrames[k]=j,e=i,f=a(e).startOf("day"),g=f.add(1,"day")}if(angular.forEach(b.timeFrames,function(a){var c=a.start.diff(b.date,"milliseconds"),d=c/b.duration*b.width,e=a.end.diff(a.start,"milliseconds"),f=e/b.duration*b.width,g=!1;a.working&&"visible"!==b.timeFramesWorkingMode?g=!0:a.working||"visible"===b.timeFramesNonWorkingMode||(g=!0),g||b.visibleTimeFrames.push(a),a.hidden=g,a.left=d,a.width=f,a.originalSize={left:a.left,width:a.width}}),"cropped"===b.timeFramesNonWorkingMode||"cropped"===b.timeFramesWorkingMode){var l=0;if(angular.forEach(b.timeFrames,function(a){(!a.working&&"cropped"!==b.timeFramesNonWorkingMode||a.working&&"cropped"!==b.timeFramesWorkingMode)&&(l+=a.width)}),l!==b.width){var m=b.width/l,n=0,o=0,p=!0;angular.forEach(b.timeFrames,function(a){!a.working&&"cropped"!==b.timeFramesNonWorkingMode||a.working&&"cropped"!==b.timeFramesWorkingMode?(a.left=(a.left-n)*m,a.width=a.width*m,a.originalSize.left=(a.originalSize.left-o)*m,a.originalSize.width=a.originalSize.width*m,a.cropped=!1,p=!1):(n+=a.width,o+=a.originalSize.width,a.left=void 0,a.width=0,a.originalSize={left:void 0,width:0},a.cropped=!0)}),b.cropped=p}else b.cropped=!1}}},b.prototype.clone=function(){return new b(a(this.date),a(this.endDate),this.left,this.width,this.calendar)},b.prototype.containsDate=function(a){return a>this.date&&a<=this.endDate},b.prototype.equals=function(a){return this.date===a.date},b.prototype.getMagnetDate=function(b){if(this.columnMagnetValue>0&&void 0!==this.columnMagnetUnit){b=a(b);var c=b.get(this.columnMagnetUnit),d=Math.round(c/this.columnMagnetValue)*this.columnMagnetValue;return b.startOf(this.columnMagnetUnit),b.set(this.columnMagnetUnit,d),b}return b};var d=function(b,c){for(var d=0;d<b.length;d++){var e=b[d];if(!e.cropped&&c>=e.left&&c<=e.left+e.width){var f=e.getDuration()/e.width*(c-e.left),g=a(e.start).add(f,"milliseconds");return g}}};return b.prototype.getDateByPosition=function(b,c){var e,f;return 0>b&&(b=0),b>this.width&&(b=this.width),("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)&&(f=d(this.timeFrames,b)),void 0===f&&(e=this.duration/this.width*b,f=a(this.date).add(e,"milliseconds")),c?this.getMagnetDate(f):f},b.prototype.getDayTimeFrame=function(a){var b=this.daysTimeFrames[c(a)];return void 0===b?[]:b},b.prototype.getPositionByDate=function(a){var b,c;if("cropped"===this.timeFramesNonWorkingMode||"cropped"===this.timeFramesWorkingMode)for(var d=a,e=this.getDayTimeFrame(d),f=0;f<e.length;f++){var g=e[f];if(d>=g.start&&d<=g.end){if(!g.cropped)return b=d.diff(g.start,"milliseconds"),c=b/g.getDuration()*g.width,this.left+g.left+c;d=e.length>f+1?e[f+1].start:g.end}}return b=a.diff(this.date,"milliseconds"),c=b/this.duration*this.width,0>c&&(c=0),c>this.width&&(c=this.width),this.left+c},b}]),gantt.factory("GanttColumnGenerator",["GanttColumn","moment",function(a,b){var c=function(c){var d=this,e=c.gantt.$scope.columnWidth;void 0===e&&(e=20);var f,g,h=c.gantt.$scope.viewScale,i=c.gantt.calendar,j=c.gantt.$scope.timeFramesWorkingMode,k=c.gantt.$scope.timeFramesNonWorkingMode;if(c.gantt.$scope.columnMagnet){var l=c.gantt.$scope.columnMagnet.trim().split(" ");l.length>1&&(f=parseInt(l[0]),g=l[l.length-1])}d.generate=function(c,d,l,n,o){if(!d&&!l)throw"to or maximumWidth must be defined";var p=!1;c=b(c).startOf(h),d&&(p=m(d),d=b(d).startOf(h));for(var q=b(c).startOf(h),r=[],s=0;;){if(l&&Math.abs(s)>l+e)break;var t=b(q),u=b(t).add(1,h),v=new a(t,u,n?s+n:s,e,i,j,k,f,g);if(!v.cropped&&(r.push(v),o?s-=e:s+=e,d))if(o){if(p&&d>q||!p&&d>=q)break}else if(p&&q>d||!p&&q>=d)break;q.add(o?-1:1,h)}return o&&(m(c)&&r.shift(),r.reverse()),r};var m=function(a){return b(a).add(1,h).startOf(h)===a}};return c}]),gantt.factory("GanttColumnHeader",["moment","GanttColumn",function(a,b){var c=function(c,d,e,f,g){var h=a(c),i=a(h).add(1,d),j=new b(h,i,e,f);return j.unit=d,j.label=g,j};return c}]),gantt.factory("GanttColumnsManager",["GanttColumnGenerator","GanttHeaderGenerator","$filter","ganttLayout","ganttBinarySearch",function(a,b,c,d,e){var f=function(a){var b=this;this.gantt=a,this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers={},this.visibleHeaders={},this.scrollAnchor=void 0,this.gantt.$scope.$watchGroup(["viewScale","columnWidth","timeFramesWorkingMode","timeFramesNonWorkingMode","columnMagnet","fromDate","toDate","autoExpand","taskOutOfRange"],function(){b.generateColumns()}),this.gantt.$scope.$watchCollection("headers",function(){b.generateColumns()}),this.gantt.$scope.$watchCollection("headersFormats",function(){b.generateColumns()}),this.gantt.$scope.$watchGroup(["ganttElementWidth","labelsWidth","showLabelsColumn","maxHeight"],function(){b.updateColumnsMeta()}),this.gantt.$scope.$watchGroup(["scrollLeft","scrollWidth"],function(){b.updateVisibleColumns()}),this.gantt.api.data.on.load(this.gantt.$scope,function(){(void 0===b.from||void 0===b.to||b.from>b.gantt.rowsManager.getDefaultFrom()||b.to<b.gantt.rowsManager.getDefaultTo())&&b.generateColumns(),b.gantt.rowsManager.sortRows()}),this.gantt.api.data.on.remove(this.gantt.$scope,function(){b.gantt.rowsManager.sortRows()}),this.gantt.api.registerMethod("columns","clear",this.clearColumns,this),this.gantt.api.registerMethod("columns","generate",this.generateColumns,this),this.gantt.api.registerMethod("columns","refresh",this.updateColumnsMeta,this),this.gantt.api.registerEvent("columns","generate")};f.prototype.setScrollAnchor=function(){if(this.gantt.scroll.$element&&this.columns.length>0){var a=this.gantt.scroll.$element[0],b=a.scrollLeft+a.offsetWidth/2;this.scrollAnchor=this.gantt.getDateByPosition(b)}},f.prototype.scrollToScrollAnchor=function(){var a=this;this.columns.length>0&&void 0!==this.scrollAnchor&&this.gantt.$scope.$$postDigest(function(){a.gantt.api.scroll.toDate(a.scrollAnchor)})},f.prototype.clearColumns=function(){this.setScrollAnchor(),this.from=void 0,this.to=void 0,this.columns=[],this.visibleColumns=[],this.previousColumns=[],this.nextColumns=[],this.headers=[],this.visibleHeaders={},this.gantt.api.columns.raise.clear()},f.prototype.generateColumns=function(c,d){if(c||(c=this.gantt.$scope.fromDate),d||(d=this.gantt.$scope.toDate),!c&&(c=this.gantt.rowsManager.getDefaultFrom(),!c))return!1;if(!d&&(d=this.gantt.rowsManager.getDefaultTo(),!d))return!1;"expand"===this.gantt.$scope.taskOutOfRange&&(c=this.gantt.rowsManager.getExpandedFrom(c),d=this.gantt.rowsManager.getExpandedTo(d)),this.setScrollAnchor(),this.from=c,this.to=d;var e=new a(this),f=new b(this);this.columns=e.generate(c,d),this.headers=f.generate(this.columns),this.previousColumns=[],this.nextColumns=[],this.updateColumnsMeta(),this.scrollToScrollAnchor(),this.gantt.api.columns.raise.generate(this.columns,this.headers)},f.prototype.updateColumnsMeta=function(){var a=this.getLastColumn();if(this.gantt.originalWidth=void 0!==a?a.originalSize.left+a.originalSize.width:0,void 0===this.gantt.$scope.columnWidth){var b=this.gantt.$scope.ganttElementWidth-(this.gantt.$scope.showLabelsColumn?this.gantt.$scope.labelsWidth:0);this.gantt.$scope.maxHeight>0&&(b-=d.getScrollBarWidth()),d.setColumnsWidth(b,this.gantt.originalWidth,this.previousColumns),d.setColumnsWidth(b,this.gantt.originalWidth,this.columns),d.setColumnsWidth(b,this.gantt.originalWidth,this.nextColumns),angular.forEach(this.headers,function(a){d.setColumnsWidth(b,this.gantt.originalWidth,a)},this)}this.gantt.width=void 0!==a?a.left+a.width:0,this.gantt.rowsManager.updateTasksPosAndSize(),this.gantt.timespansManager.updateTimespansPosAndSize(),this.updateVisibleColumns(),this.gantt.rowsManager.updateVisibleObjects(),this.gantt.currentDateManager.setCurrentDate(this.gantt.$scope.currentDateValue)},f.prototype.getLastColumn=function(a){var b=this.columns;return a&&(b=this.nextColumns),b&&b.length>0?b[b.length-1]:void 0},f.prototype.getFirstColumn=function(a){var b=this.columns;return a&&(b=this.previousColumns),b&&b.length>0?b[0]:void 0},f.prototype.getColumnByDate=function(a){this.expandExtendedColumnsForDate(a);var b=this.previousColumns.concat(this.columns,this.nextColumns),c=e.get(b,a,function(a){return a.date});return void 0!==c[0]?c[0]:c[1]},f.prototype.getColumnByPosition=function(a){this.expandExtendedColumnsForPosition(a);var b=this.previousColumns.concat(this.columns,this.nextColumns);return e.get(b,a,function(a){return a.left})[0]},f.prototype.expandExtendedColumnsForPosition=function(b){if(0>b){var c=this.getFirstColumn(),d=c.date,e=this.getFirstColumn(!0);return(!e||e.left>b)&&(this.previousColumns=new a(this).generate(d,void 0,-b,0,!0)),!0}if(b>this.width){var f=this.getLastColumn(),g=f.getDateByPosition(f.width),h=this.getLastColumn(!0);return(!h||h.left+h.width<b)&&(this.nextColumns=new a(this).generate(g,void 0,b-this.width,this.width,!1)),!0}return!1},f.prototype.expandExtendedColumnsForDate=function(b){var c,d=this.getFirstColumn();d&&(c=d.date);var e,f=this.getLastColumn();if(f&&(e=f.getDateByPosition(f.width)),c&&c>b){var g=this.getFirstColumn(!0);return(!g||g.date>b)&&(this.previousColumns=new a(this).generate(c,b,void 0,0,!0)),!0}if(e&&b>e){var h=this.getLastColumn(!0);return(!h||h>e)&&(this.nextColumns=new a(this).generate(e,b,void 0,this.width,!1)),!0}return!1},f.prototype.getActiveHeadersCount=function(){var a,b=0;for(a in this.headers)this.headers.hasOwnProperty(a)&&b++;return b},f.prototype.updateVisibleColumns=function(){this.visibleColumns=c("ganttColumnLimit")(this.columns,this.gantt.$scope.scrollLeft,this.gantt.$scope.scrollWidth),this.visibleHeaders={},angular.forEach(this.headers,function(a,b){this.headers.hasOwnProperty(b)&&(this.visibleHeaders[b]=c("ganttColumnLimit")(a,this.gantt.$scope.scrollLeft,this.gantt.$scope.scrollWidth))},this)};var g={year:"YYYY",quarter:"[Q]Q YYYY",month:"MMMM YYYY",week:"w",day:"D",hour:"H",minute:"HH:mm"},h={day:"LL",hour:"H",minute:"HH:mm"},i={year:"YYYY",quarter:"[Q]Q",month:"MMMM"};return f.prototype.getHeaderFormat=function(a){var b;return void 0!==this.gantt.$scope.headersFormats&&(b=this.gantt.$scope.headersFormats[a]),void 0===b&&(["millisecond","second","minute","hour"].indexOf(this.gantt.$scope.viewScale)>-1?b=h[a]:["month","quarter","year"].indexOf(this.gantt.$scope.viewScale)>-1&&(b=i[a]),void 0===b&&(b=g[a])),b},f}]),gantt.factory("GanttHeaderGenerator",["GanttColumnHeader",function(a){var b=function(b,c,d){for(var e,f,g=[],h=0,i=c.length;i>h;h++){var j=c[h],k=j.date.get(d);if(0===h||f!==k){f=k;var l=j.date.format(b.getHeaderFormat(d));e=new a(j.date,d,j.originalSize.left,j.originalSize.width,l),e.left=j.left,e.width=j.width,g.push(e)}else e.originalSize.width+=j.originalSize.width,e.width+=j.width}return g};return function(a){this.generate=function(c){var d=[];void 0===a.gantt.$scope.headers?(d=[],["year","quarter","month"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("year"),["quarter"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("quarter"),["day","week","month"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("month"),["day","week"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("week"),["hour","day"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("day"),["hour","minute","second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("hour"),["minute","second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("minute"),["second"].indexOf(a.gantt.$scope.viewScale)>-1&&d.push("second"),0===d.length&&d.push(a.gantt.$scope.viewScale)):d=a.gantt.$scope.headers;var e=[];return angular.forEach(d,function(d){e.push(b(a,c,d))}),e}}}]),gantt.factory("Gantt",["GanttApi","GanttCalendar","GanttScroll","GanttBody","GanttRowHeader","GanttHeader","GanttLabels","GanttRowsManager","GanttColumnsManager","GanttTimespansManager","GanttCurrentDateManager",function(a,b,c,d,e,f,g,h,i,j,k){var l=function(l,m){var n=this;this.$scope=l,this.$element=m,this.api=new a(this),this.api.registerEvent("core","ready"),this.api.registerEvent("directives","new"),this.api.registerEvent("directives","destroy"),this.api.registerEvent("data","load"),this.api.registerEvent("data","remove"),this.api.registerEvent("data","clear"),this.api.registerMethod("core","getDateByPosition",this.getDateByPosition,this),this.api.registerMethod("core","getPositionByDate",this.getPositionByDate,this),this.api.registerMethod("data","load",this.loadData,this),this.api.registerMethod("data","remove",this.removeData,this),this.api.registerMethod("data","clear",this.clearData,this),this.calendar=new b(this),this.calendar.registerTimeFrames(this.$scope.timeFrames),this.calendar.registerDateFrames(this.$scope.dateFrames),this.api.registerMethod("timeframes","registerTimeFrames",this.calendar.registerTimeFrames,this.calendar),this.api.registerMethod("timeframes","clearTimeframes",this.calendar.clearTimeFrames,this.calendar),this.api.registerMethod("timeframes","registerDateFrames",this.calendar.registerDateFrames,this.calendar),this.api.registerMethod("timeframes","clearDateFrames",this.calendar.clearDateFrames,this.calendar),this.api.registerMethod("timeframes","registerTimeFrameMappings",this.calendar.registerTimeFrameMappings,this.calendar),this.api.registerMethod("timeframes","clearTimeFrameMappings",this.calendar.clearTimeFrameMappings,this.calendar),l.$watch("timeFrames",function(a,b){angular.equals(a,b)||(this.calendar.clearTimeFrames(),this.calendar.registerTimeFrames(l.timeFrames),this.columnsManager.generateColumns())}),l.$watch("dateFrames",function(a,b){angular.equals(a,b)||(this.calendar.clearTimeFrames(),this.calendar.registerTimeFrames(l.timeFrames),this.columnsManager.generateColumns())}),this.scroll=new c(this),this.body=new d(this),this.rowHeader=new e(this),this.header=new f(this),this.labels=new g(this),this.rowsManager=new h(this),this.columnsManager=new i(this),this.timespansManager=new j(this),this.currentDateManager=new k(this),this.originalWidth=0,this.width=0,this.$scope.$watch("data",function(a,b){angular.equals(a,b)||(n.clearData(),n.loadData(a))}),angular.isFunction(this.$scope.api)&&this.$scope.api(this.api)};return l.prototype.getDateByPosition=function(a,b){var c=this.columnsManager.getColumnByPosition(a);return void 0!==c?c.getDateByPosition(a-c.left,b):void 0},l.prototype.getPositionByDate=function(a){if(void 0===a)return void 0;moment.isMoment(moment)||(a=moment(a));var b=this.columnsManager.getColumnByDate(a);return void 0!==b?b.getPositionByDate(a):void 0},l.prototype.loadData=function(a){angular.isArray(a)||(a=void 0!==a?[a]:[]);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.rowsManager.addRow(d)}this.api.data.raise.load(this.$scope,a)},l.prototype.removeData=function(a){angular.isArray(a)||(a=void 0!==a?[a]:[]),this.rowsManager.removeData(a),this.api.data.raise.remove(this.$scope,a)},l.prototype.clearData=function(){this.rowsManager.removeAll(),this.api.data.raise.clear(this.$scope)},l}]),gantt.factory("GanttRow",["GanttTask","moment","$filter",function(a,b,c){var d=function(a,b,c,d,e,f,g,h){this.id=a,this.rowsManager=b,this.name=c,this.order=d,this.height=e,this.color=f,this.classes=g,this.from=void 0,this.to=void 0,this.tasksMap={},this.tasks=[],this.filteredTasks=[],this.visibleTasks=[],this.data=h};return d.prototype.addTask=function(b){var c;return b.id in this.tasksMap?(c=this.tasksMap[b.id],c.copy(b)):(c=new a(b.id,this,b.name,b.color,b.classes,b.priority,b.from,b.to,b.data,b.est,b.lct,b.progress),this.tasksMap[b.id]=c,this.tasks.push(c),this.filteredTasks.push(c),this.visibleTasks.push(c)),this.sortTasks(),this.setFromToByTask(c),this.rowsManager.gantt.api.tasks.raise.add(c),c},d.prototype.moveTaskToRow=function(a){var b=a.row;b.removeTask(a.id,!0),b.updateVisibleTasks(),this.tasksMap[a.id]=a,this.tasks.push(a),this.filteredTasks.push(a),this.visibleTasks.push(a),a.row=this,this.sortTasks(),this.setFromToByTask(a),a.updatePosAndSize(),this.updateVisibleTasks(),this.rowsManager.gantt.api.tasks.raise.move(a,b)},d.prototype.updateVisibleTasks=function(){this.filteredTasks=this.rowsManager.gantt.$scope.filterTask?c("filter")(this.tasks,this.rowsManager.gantt.$scope.filterTask,this.rowsManager.gantt.$scope.filterTaskComparator):this.tasks.slice(0),this.visibleTasks=c("ganttTaskLimit")(this.filteredTasks,this.rowsManager.gantt)},d.prototype.updateTasksPosAndSize=function(){for(var a=0,b=this.tasks.length;b>a;a++)this.tasks[a].updatePosAndSize()},d.prototype.removeTask=function(a,b){if(a in this.tasksMap){delete this.tasksMap[a];for(var c,d,e=this.tasks.length-1;e>=0;e--)c=this.tasks[e],c.id===a&&(d=c,this.tasks.splice(e,1),(this.from-c.from===0||this.to-c.to===0)&&this.setFromTo());for(e=this.filteredTasks.length-1;e>=0;e--)c=this.filteredTasks[e],c.id===a&&this.filteredTasks.splice(e,1);for(e=this.visibleTasks.length-1;e>=0;e--)c=this.visibleTasks[e],c.id===a&&this.visibleTasks.splice(e,1);return b||this.rowsManager.gantt.api.tasks.raise.remove(d),d}},d.prototype.setFromTo=function(){this.from=void 0,this.to=void 0;for(var a=0,b=this.tasks.length;b>a;a++)this.setFromToByTask(this.tasks[a])},d.prototype.setFromToByTask=function(a){void 0===this.from?this.from=b(a.from):a.from<this.from&&(this.from=b(a.from)),void 0===this.to?this.to=b(a.to):a.to>this.to&&(this.to=b(a.to))},d.prototype.sortTasks=function(){this.tasks.sort(function(a,b){return a.left-b.left})},d.prototype.copy=function(a){this.name=a.name,this.height=a.height,this.color=a.color,this.classes=a.classes,this.data=a.data,void 0!==a.order&&(this.order=a.order)},d.prototype.clone=function(){for(var a=new d(this.id,this.rowsManager,this.name,this.order,this.height,this.color,this.classes,this.data),b=0,c=this.tasks.length;c>b;b++)a.addTask(this.tasks[b].clone());return a},d}]),gantt.factory("GanttRowHeader",[function(){var a=function(a){this.gantt=a};return a}]),gantt.factory("GanttRowsManager",["GanttRow","$filter","moment",function(a,b,c){var d=function(a){var b=this;this.gantt=a,this.rowsMap={},this.rows=[],this.filteredRows=[],this.visibleRows=[],this.gantt.$scope.$watchGroup(["scrollLeft","scrollWidth"],function(){b.updateVisibleTasks()}),this.gantt.$scope.$watchGroup(["filterTask","filterTaskComparator"],function(){b.updateVisibleTasks()}),this.gantt.$scope.$watchGroup(["filterRow","filterRowComparator"],function(){b.updateVisibleRows()}),this.gantt.$scope.$watch("sortMode",function(){b.sortRows()}),this.updateVisibleObjects(),this.gantt.api.registerMethod("rows","sort",d.prototype.sortRows,this),this.gantt.api.registerMethod("rows","swap",d.prototype.swapRows,this),this.gantt.api.registerMethod("rows","refresh",d.prototype.updateVisibleObjects,this),this.gantt.api.registerEvent("tasks","add"),this.gantt.api.registerEvent("tasks","change"),this.gantt.api.registerEvent("tasks","remove"),this.gantt.api.registerEvent("tasks","filter"),this.gantt.api.registerEvent("rows","add"),this.gantt.api.registerEvent("rows","change"),this.gantt.api.registerEvent("rows","remove"),this.gantt.api.registerEvent("rows","orderChange"),this.gantt.api.registerEvent("rows","filter")};return d.prototype.addRow=function(b){var c,d=!1;if(b.id in this.rowsMap)c=this.rowsMap[b.id],c.copy(b),d=!0,this.gantt.api.rows.raise.change(c);else{var e=b.order;void 0===e&&(e=this.highestRowOrder),e>=this.highestRowOrder&&(this.highestRowOrder=e+1),c=new a(b.id,this,b.name,e,b.height,b.color,b.classes,b.data),this.rowsMap[b.id]=c,this.rows.push(c),this.filteredRows.push(c),this.visibleRows.push(c),this.gantt.api.rows.raise.add(c)}if(void 0!==b.tasks&&b.tasks.length>0)for(var f=0,g=b.tasks.length;g>f;f++)c.addTask(b.tasks[f]);return d},d.prototype.removeRow=function(a){if(a in this.rowsMap){delete this.rowsMap[a];for(var b,c,d=this.rows.length-1;d>=0;d--)c=this.rows[d],c.id===a&&(b=c,this.rows.splice(d,1));for(d=this.filteredRows.length-1;d>=0;d--)c=this.filteredRows[d],c.id===a&&this.filteredRows.splice(d,1);for(d=this.visibleRows.length-1;d>=0;d--)c=this.visibleRows[d],c.id===a&&this.visibleRows.splice(d,1);return this.gantt.api.rows.raise.remove(b),c}return void 0},d.prototype.removeData=function(a){for(var b=0,c=a.length;c>b;b++){var d,e=a[b];if(void 0!==e.tasks&&e.tasks.length>0){if(e.id in this.rowsMap){d=this.rowsMap[e.id];for(var f=0,g=e.tasks.length;g>f;f++)d.removeTask(e.tasks[f].id);this.gantt.api.rows.raise.change(d)}}else d=this.removeRow(e.id)}this.updateVisibleObjects()},d.prototype.removeAll=function(){this.rowsMap={},this.rows=[],this.filteredRows=[],this.visibleRows=[]},d.prototype.sortRows=function(){var a=this.gantt.$scope.sortMode,c=!1;"-"===a.charAt(0)&&(c=!0,a=a.substr(1));var d=b("orderBy");this.rows="custom"===a?d(this.rows,"order",c):d(this.rows,a,c),this.updateVisibleRows()},d.prototype.swapRows=function(a,b){var c=a.order;a.order=b.order,b.order=c,this.gantt.api.rows.raise.change(a),this.gantt.api.rows.raise.orderChange(a),this.gantt.api.rows.raise.change(b),this.gantt.api.rows.raise.orderChange(b),"custom"!==this.gantt.$scope.sortMode?this.gantt.$scope.sortMode="custom":this.sortRows()},d.prototype.updateVisibleObjects=function(){this.updateVisibleRows(),this.updateVisibleTasks()},d.prototype.updateVisibleRows=function(){var a=this.filteredRows;this.filteredRows=this.gantt.$scope.filterRow?b("filter")(this.rows,this.gantt.$scope.filterRow,this.gantt.$scope.filterRowComparator):this.rows.slice(0);var c=!angular.equals(a,this.filteredRows);this.visibleRows=this.filteredRows,c&&this.gantt.api.rows.raise.filter(this.rows,this.filteredRows)},d.prototype.updateVisibleTasks=function(){var a=[],b=[],c=[];angular.forEach(this.filteredRows,function(d){a=a.concat(d.filteredTasks),d.updateVisibleTasks(),b=b.concat(d.filteredTasks),c=c.concat(d.tasks)});var d=!angular.equals(a,b);d&&this.gantt.api.tasks.raise.filter(c,b)},d.prototype.updateTasksPosAndSize=function(){for(var a=0,b=this.rows.length;b>a;a++)this.rows[a].updateTasksPosAndSize()},d.prototype.getExpandedFrom=function(a){a=a?c(a):a;var b=a;return angular.forEach(this.rows,function(a){(void 0===b||b>a.from)&&(b=a.from)}),b&&(!a||a>b)?b:a},d.prototype.getExpandedTo=function(a){a=a?c(a):a;var b=a;return angular.forEach(this.rows,function(a){(void 0===b||b<a.to)&&(b=a.to)}),b&&(!this.gantt.$scope.toDate||b>this.gantt.$scope.toDate)?b:a},d.prototype.getDefaultFrom=function(){var a;return angular.forEach(this.rows,function(b){(void 0===a||b.from<a)&&(a=b.from)}),a},d.prototype.getDefaultTo=function(){var a;
return angular.forEach(this.rows,function(b){(void 0===a||b.to>a)&&(a=b.to)}),a},d}]),gantt.factory("GanttTask",["moment","GanttTaskProgress",function(a,b){var c=function(c,d,e,f,g,h,i,j,k,l,m,n){this.id=c,this.rowsManager=d.rowsManager,this.row=d,this.name=e,this.color=f,this.classes=g,this.priority=h,this.from=a(i),this.to=a(j),this.truncatedLeft=!1,this.truncatedRight=!1,this.data=k,void 0!==n&&(this.progress="object"==typeof n?new b(this,n.percent,n.color,n.classes):new b(this,n)),void 0!==l&&void 0!==m&&(this.est=a(l),this.lct=a(m)),this._fromLabel=void 0,this._toLabel=void 0};return c.prototype.getFromLabel=function(){return void 0===this._fromLabel&&(this._fromLabel=this.from.format(this.rowsManager.gantt.$scope.tooltipDateFormat)),this._fromLabel},c.prototype.getToLabel=function(){return void 0===this._toLabel&&(this._toLabel=this.to.format(this.rowsManager.gantt.$scope.tooltipDateFormat)),this._toLabel},c.prototype.checkIfMilestone=function(){this.isMilestone=this.from-this.to===0},c.prototype.checkIfMilestone(),c.prototype.updatePosAndSize=function(){this.modelLeft=this.rowsManager.gantt.getPositionByDate(this.from),this.modelWidth=this.rowsManager.gantt.getPositionByDate(this.to)-this.modelLeft,this.outOfRange=this.modelLeft+this.modelWidth<0||this.modelLeft>this.rowsManager.gantt.width,this.left=Math.min(Math.max(this.modelLeft,0),this.rowsManager.gantt.width),this.modelLeft<0?(this.truncatedLeft=!0,this.modelWidth+this.modelLeft>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.width=this.rowsManager.gantt.width):(this.truncatedRight=!1,this.width=this.modelWidth+this.modelLeft)):this.modelWidth+this.modelLeft>this.rowsManager.gantt.width?(this.truncatedRight=!0,this.truncatedLeft=!1,this.width=this.rowsManager.gantt.width-this.modelLeft):(this.truncatedLeft=!1,this.truncatedRight=!1,this.width=this.modelWidth)},c.prototype.setFrom=function(a){this.from=this.rowsManager.gantt.getDateByPosition(a,!0),this._fromLabel=void 0,this.row.setFromToByTask(this),this.updatePosAndSize(),this.checkIfMilestone()},c.prototype.setTo=function(a){this.to=this.rowsManager.gantt.getDateByPosition(a,!0),this._toLabel=void 0,this.row.setFromToByTask(this),this.updatePosAndSize(),this.checkIfMilestone()},c.prototype.moveTo=function(a){this.from=this.rowsManager.gantt.getDateByPosition(a,!0),this._fromLabel=void 0;var b=this.rowsManager.gantt.getPositionByDate(this.from);this.to=this.rowsManager.gantt.getDateByPosition(b+this.modelWidth,!0),this._toLabel=void 0,this.row.setFromToByTask(this),this.updatePosAndSize()},c.prototype.copy=function(b){this.name=b.name,this.color=b.color,this.classes=b.classes,this.priority=b.priority,this.from=a(b.from),this.to=a(b.to),this.est=void 0!==b.est?a(b.est):void 0,this.lct=void 0!==b.lct?a(b.lct):void 0,this.data=b.data,this.isMilestone=b.isMilestone},c.prototype.clone=function(){return new c(this.id,this.row,this.name,this.color,this.classes,this.priority,this.from,this.to,this.data,this.est,this.lct,this.progress)},c}]),gantt.factory("GanttTaskProgress",[function(){var a=function(a,b,c,d){this.task=a,this.percent=b,this.color=c,this.classes=d};return a.prototype.clone=function(){return new a(this.task,this.percent,this.color,this.classes)},a}]),gantt.factory("GanttBody",["GanttBodyColumns","GanttBodyRows",function(a,b){var c=function(c){this.gantt=c,this.columns=new a(this),this.rows=new b(this)};return c}]),gantt.factory("GanttBodyColumns",[function(){var a=function(a){this.$element=a};return a}]),gantt.factory("GanttBodyRows",[function(){var a=function(a){this.$element=a};return a}]),gantt.factory("GanttHeader",["GanttHeaderColumns",function(a){var b=function(b){this.gantt=b,this.columns=new a(this),this.getHeight=function(){return this.$element[0].offsetHeight}};return b}]),gantt.factory("GanttHeaderColumns",[function(){var a=function(a){this.$element=a};return a}]),gantt.factory("GanttLabels",[function(){var a=function(a){this.gantt=a,this.gantt.api.registerEvent("labels","resize")};return a}]),gantt.factory("GanttScroll",[function(){var a=function(b){this.gantt=b,this.gantt.api.registerEvent("scroll","scroll"),this.gantt.api.registerMethod("scroll","to",a.prototype.scrollTo,this),this.gantt.api.registerMethod("scroll","toDate",a.prototype.scrollToDate,this),this.gantt.api.registerMethod("scroll","left",a.prototype.scrollToLeft,this),this.gantt.api.registerMethod("scroll","right",a.prototype.scrollToRight,this)};return a.prototype.scrollTo=function(a){this.$element[0].scrollLeft=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToLeft=function(a){this.$element[0].scrollLeft-=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToRight=function(a){this.$element[0].scrollLeft+=a,this.$element.triggerHandler("scroll")},a.prototype.scrollToDate=function(a){var b=this.gantt.getPositionByDate(a);void 0!==b&&(this.$element[0].scrollLeft=b-this.$element[0].offsetWidth/2)},a}]),gantt.factory("GanttTimespan",["moment",function(a){var b=function(b,c,d,e,f,g,h,i,j,k,l){this.id=b,this.gantt=c,this.name=d,this.color=e,this.classes=f,this.priority=g,this.from=a(h),this.to=a(i),this.data=j,void 0!==k&&void 0!==l&&(this.est=a(k),this.lct=a(l))};return b.prototype.updatePosAndSize=function(){this.left=this.gantt.getPositionByDate(this.from),this.width=this.gantt.getPositionByDate(this.to)-this.left},b.prototype.setFrom=function(a){this.from=this.gantt.getDateByPosition(a),this.updatePosAndSize()},b.prototype.setTo=function(a){this.to=this.gantt.getDateByPosition(a),this.updatePosAndSize()},b.prototype.moveTo=function(a){this.from=this.gantt.getDateByPosition(a),this.to=this.gantt.getDateByPosition(a+this.width),this.updatePosAndSize()},b.prototype.copy=function(b){this.name=b.name,this.color=b.color,this.classes=b.classes,this.priority=b.priority,this.from=a(b.from),this.to=a(b.to),this.est=void 0!==b.est?a(b.est):void 0,this.lct=void 0!==b.lct?a(b.lct):void 0,this.data=b.data},b.prototype.clone=function(){return new b(this.id,this.gantt,this.name,this.color,this.classes,this.priority,this.from,this.to,this.data,this.est,this.lct)},b}]),gantt.factory("GanttTimespansManager",["GanttTimespan",function(a){var b=function(a){var b=this;this.gantt=a,this.timespansMap={},this.timespans=[],this.gantt.$scope.$watch("timespans",function(a){b.clearTimespans(),b.loadTimespans(a)}),this.gantt.api.registerMethod("timespans","load",this.loadTimespans,this),this.gantt.api.registerMethod("timespans","remove",this.removeTimespans,this),this.gantt.api.registerMethod("timespans","clear",this.clearTimespans,this),this.gantt.api.registerEvent("timespans","add"),this.gantt.api.registerEvent("timespans","remove"),this.gantt.api.registerEvent("timespans","change")};return b.prototype.loadTimespans=function(a){angular.isArray(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.loadTimespan(d)}},b.prototype.loadTimespan=function(b){var c,d=!1;return b.id in this.timespansMap?(c=this.timespansMap[b.id],c.copy(b),d=!0,this.gantt.api.timespans.raise.change(c)):(c=new a(b.id,this.gantt,b.name,b.color,b.classes,b.priority,b.from,b.to,b.data),this.timespansMap[b.id]=c,this.timespans.push(c),this.gantt.api.timespans.raise.add(c)),c.updatePosAndSize(),d},b.prototype.removeTimespans=function(a){angular.isArray(a)||(a=[a]);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.removeTimespan(d.id)}this.updateVisibleObjects()},b.prototype.removeTimespan=function(a){if(a in this.timespansMap){delete this.timespansMap[a];for(var b,c,d=this.timespans.length-1;d>=0;d--)c=this.timespans[d],c.id===a&&(b=c,this.timespans.splice(d,1));return this.gantt.api.timespans.raise.remove(b),b}return void 0},b.prototype.clearTimespans=function(){this.timespansMap={},this.timespans=[]},b.prototype.updateTimespansPosAndSize=function(){for(var a=0,b=this.timespans.length;b>a;a++)this.timespans[a].updatePosAndSize()},b}]),gantt.service("ganttBinarySearch",[function(){return{getIndicesOnly:function(a,b,c){for(var d=-1,e=a.length;e-d>1;){var f=Math.floor((d+e)/2);c(a[f])<=b?d=f:e=f}return void 0!==a[d]&&c(a[d])===b&&(e=d),[d,e]},get:function(a,b,c){var d=this.getIndicesOnly(a,b,c);return[a[d[0]],a[d[1]]]}}}]),gantt.service("ganttUtils",[function(){return{createBoundedWrapper:function(a,b){return function(){return b.apply(a,arguments)}},newId:function(){var a=(new Date).getTime();return function(){return a+=1}}()}}]),gantt.filter("ganttColumnLimit",["ganttBinarySearch",function(a){return function(b,c,d){var e=function(a){return a.left},f=a.getIndicesOnly(b,c,e)[0],g=a.getIndicesOnly(b,c+d,e)[1];return b.slice(f,g)}}]),gantt.directive("ganttLimitUpdater",["$timeout","ganttDebounce",function(a,b){return{restrict:"A",controller:["$scope","$element",function(a,c){var d=c[0],e=function(){a.scrollLeft=d.scrollLeft,a.scrollWidth=d.offsetWidth};c.bind("scroll",b(function(){e()},5)),a.$watch("gantt.width",b(function(){e()},20))}]}}]),gantt.filter("ganttTaskLimit",[function(){return function(a,b){var c=[],d=b.columnsManager.getFirstColumn(),e=b.columnsManager.getLastColumn();if(void 0!==d&&void 0!==e)for(var f=0,g=a.length;g>f;f++){var h=a[f];if(h.to>b.columnsManager.getFirstColumn().date&&h.from<b.columnsManager.getLastColumn().endDate){var i=b.$scope.scrollLeft,j=b.$scope.scrollWidth;(h.left>=i&&h.left<=i+j||h.left+h.width>=i&&h.left+h.width<=i+j||h.left<i&&h.left+h.width>i+j)&&c.push(h)}}return c}}]),gantt.directive("ganttLabelsResize",["$document","ganttDebounce","ganttMouseOffset",function(a,b,c){return{restrict:"A",scope:{enabled:"=ganttLabelsResize",width:"=ganttLabelsResizeWidth",minWidth:"=ganttLabelsResizeMinWidth"},controller:["$scope","$element",function(d,e){var f,g=5,h="ew-resize";e.bind("mousedown",function(a){d.enabled&&j(a)&&(k(a),a.preventDefault())}),e.bind("mousemove",function(a){d.enabled&&(j(a)?e.css("cursor",h):e.css("cursor",""))});var i=function(a){0===d.width&&(d.width=e[0].offsetWidth),d.width+=a-f,d.width<d.minWidth&&(d.width=d.minWidth),f=a},j=function(a){var b=c.getOffset(a).x;return b>e[0].offsetWidth-g},k=function(c){f=c.screenX,angular.element(a[0].body).css({"-moz-user-select":"-moz-none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none",cursor:h});var d=b(function(a){i(a.screenX)},5);angular.element(a[0].body).bind("mousemove",d),angular.element(a[0].body).one("mouseup",function(){angular.element(a[0].body).unbind("mousemove",d),l()})},l=function(){e.css("cursor",""),angular.element(a[0].body).css({"-moz-user-select":"","-webkit-user-select":"","-ms-user-select":"","user-select":"",cursor:""}),d.gantt.api.labels.raise.resize(d.width)}}]}}]),gantt.directive("ganttRightClick",["$parse",function(a){return{restrict:"A",compile:function(b,c){var d=a(c.ganttRightClick);return function(a,b){b.on("contextmenu",function(b){a.$apply(function(){d(a,{$event:b})})})}}}}]),gantt.directive("ganttHorizontalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(a,b){a.scrollManager.horizontal.push(b[0])}]}}),gantt.directive("ganttScrollManager",function(){return{restrict:"A",require:"^gantt",controller:["$scope",function(a){a.scrollManager={horizontal:[],vertical:[]}}]}}),gantt.directive("ganttScrollSender",["$timeout","ganttDebounce",function(a,b){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(c,d){var e=d[0],f=function(){var a,b;for(a=0,b=c.scrollManager.vertical.length;b>a;a++){var d=c.scrollManager.vertical[a];d.style.top!==-e.scrollTop&&(d.style.top=-e.scrollTop+"px",d.style.height=e.scrollHeight+"px")}for(a=0,b=c.scrollManager.horizontal.length;b>a;a++){var f=c.scrollManager.horizontal[a];f.style.left!==-e.scrollLeft&&(f.style.left=-e.scrollLeft+"px",f.style.width=e.scrollWidth+"px")}};d.bind("scroll",f),c.gantt.api.rows.on.change(c,b(function(){f()},5)),c.$watch("gantt.width",function(b){0===b&&a(function(){f()},0,!0)})}]}}]),gantt.directive("ganttScrollable",["ganttDebounce","ganttLayout",function(a,b){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.scrollable.tmpl.html":b.templateUrl},controller:["$scope","$element",function(c,d){c.gantt.scroll.$element=d;var e,f,g=b.getScrollBarWidth(),h=500,i=function(a,b,d){if(!("both"!==c.autoExpand&&c.autoExpand!==!0&&c.autoExpand!==d||Date.now()-f<h)){var e,g,i=1,j=31;"left"===d?(e="hour"===c.viewScale?moment(b).add(-i,"day"):moment(b).add(-j,"day"),g=b):(e=b,g="hour"===c.viewScale?moment(b).add(i,"day"):moment(b).add(j,"day")),c.fromDate=e,c.toDate=g,f=Date.now()}};d.bind("scroll",a(function(){var a,b,f=d[0];f.scrollLeft<e&&0===f.scrollLeft?(a="left",b=c.gantt.columnsManager.from):f.scrollLeft>e&&f.offsetWidth+f.scrollLeft>=f.scrollWidth-1&&(a="right",b=c.gantt.columnsManager.to),e=f.scrollLeft,void 0!==b?(i(f,b,a),c.gantt.api.scroll.raise.scroll(f.scrollLeft,b,a)):c.gantt.api.scroll.raise.scroll(f.scrollLeft)},5)),c.getScrollableCss=function(){var a={};return c.ganttElementWidth-(c.showLabelsColumn?c.labelsWidth:0)>c.gantt.width+g&&(a.width=c.gantt.width+g+"px"),c.maxHeight>0?(a["max-height"]=c.maxHeight-c.gantt.header.getHeight()+"px",a["overflow-y"]="auto"):a["overflow-y"]="hidden",a},c.gantt.api.directives.raise.new("ganttScrollable",c,d),c.$on("$destroy",function(){c.gantt.api.directives.raise.destroy("ganttScrollable",c,d)})}]}}]),gantt.directive("ganttVerticalScrollReceiver",function(){return{restrict:"A",require:"^ganttScrollManager",controller:["$scope","$element",function(a,b){a.scrollManager.vertical.push(b[0])}]}}),gantt.directive("ganttElementWidthListener",[function(){return{restrict:"A",controller:["$scope","$element","$attrs",function(a,b,c){var d=c.ganttElementWidthListener;""===d&&(d="ganttElementWidth");for(var e=a;0===d.indexOf("$parent.");)d=d.substring("$parent.".length),e=a.$parent;e.$watch(function(){e[d]=b[0].offsetWidth})}]}}]),gantt.directive("ganttTaskProgress",[function(){return{restrict:"E",requires:"^ganttTask",templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.taskProgress.tmpl.html":b.templateUrl},replace:!0,controller:["$scope","$element",function(a,b){a.getCss=function(){var b={};return b["background-color"]=a.task.progress.color?a.task.progress.color:"#6BC443",b.width=a.task.progress.percent+"%",b},a.task.rowsManager.gantt.api.directives.raise.new("ganttTaskProgress",a,b),a.$on("$destroy",function(){a.task.rowsManager.gantt.api.directives.raise.destroy("ganttTaskProgress",a,b)})}]}}]),gantt.directive("ganttTask",[function(){return{restrict:"E",require:"^ganttRow",templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.task.tmpl.html":b.templateUrl},replace:!0,controller:["$scope","$element",function(a,b){a.gantt.api.directives.raise.new("ganttTask",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttTask",a,b)})}]}}]),gantt.directive("ganttTaskContent",[function(){return{restrict:"E",require:"^ganttTask",templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.taskContent.tmpl.html":b.templateUrl},replace:!0,controller:["$scope","$element",function(a,b){a.task.$element=b,a.gantt.api.directives.raise.new("ganttTaskContent",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttTaskContent",a,b)})}]}}]),gantt.directive("ganttBody",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.body.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.body.$element=b,a.gantt.api.directives.raise.new("ganttBody",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttBody",a,b)})}]}}]),gantt.directive("ganttBodyColumns",[function(){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.bodyColumns.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.body.columns.$element=b,a.gantt.api.directives.raise.new("ganttBodyColumns",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttBodyColumns",a,b)})}]}}]),gantt.directive("ganttBodyRows",[function(){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.bodyRows.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.body.rows.$element=b,a.gantt.api.directives.raise.new("ganttBodyRows",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttBodyRows",a,b)})}]}}]),gantt.directive("ganttColumn",[function(){return{restrict:"E",require:"^ganttBodyColumns",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.column.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.column.$element=b,a.gantt.api.directives.raise.new("ganttColumn",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttColumn",a,b)})}]}}]),gantt.directive("ganttColumnHeader",[function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.columnHeader.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.api.directives.raise.new("ganttColumnHeader",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttColumnHeader",a,b)})}]}}]),gantt.directive("ganttHeader",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.header.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.header.$element=b,a.getHeaderCss=function(){var b={};return a.ganttElementWidth-(a.showLabelsColumn?a.labelsWidth:0)>a.gantt.width&&(b.width=a.gantt.width+"px"),b},a.gantt.api.directives.raise.new("ganttHeader",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttHeader",a,b)})}]}}]),gantt.directive("ganttHeaderColumns",[function(){return{restrict:"E",require:"^ganttHeader",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.headerColumns.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.header.columns.$element=b,a.gantt.api.directives.raise.new("ganttHeaderColumns",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttHeaderColumns",a,b)})}]}}]),gantt.directive("ganttLabels",[function(){return{restrict:"E",require:"^gantt",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.labels.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.labels.$element=b,a.gantt.api.directives.raise.new("ganttLabels",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttLabels",a,b)})}]}}]),gantt.directive("ganttRow",[function(){return{restrict:"E",require:"^ganttBody",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.row.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.row.$element=b,a.gantt.api.directives.raise.new("ganttRow",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttRow",a,b)})}]}}]),gantt.directive("ganttRowHeader",[function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.rowHeader.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.rowHeader.$element=b,a.gantt.api.directives.raise.new("ganttRowHeader",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttRowHeader",a,b)})}]}}]),gantt.directive("ganttRowLabel",[function(){return{restrict:"E",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.rowLabel.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.gantt.api.directives.raise.new("ganttRowLabel",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttRowLabel",a,b)})}]}}]),gantt.directive("ganttTimeFrame",[function(){return{restrict:"E",require:"^ganttColumn",transclude:!0,replace:!0,templateUrl:function(a,b){return void 0===b.templateUrl?"template/default.timeFrame.tmpl.html":b.templateUrl},controller:["$scope","$element",function(a,b){a.timeFrame.$element=b,a.getClass=function(){var b=["gantt-timeframe"+(a.timeFrame.working?"":"-non")+"-working"];return a.timeFrame.classes&&(b=b.concat(a.timeFrame.classes)),b},a.gantt.api.directives.raise.new("ganttTimeFrame",a,b),a.$on("$destroy",function(){a.gantt.api.directives.raise.destroy("ganttTimeFrame",a,b)})}]}}]),gantt.factory("ganttDebounce",["$timeout",function(a){function b(b,c,d){var e=0;return function(){var f=this,g=arguments;e++;var h=function(a){return function(){return a===e?b.apply(f,g):void 0}}(e);return a(h,c,void 0===d?!0:d)}}return b}]),gantt.service("ganttEnableNgAnimate",["$injector",function(a){var b;try{b=a.get("$animate")}catch(c){}return void 0!==b?function(a,c){b.enabled(!1,c)}:function(){}}]),gantt.service("ganttLayout",["$document",function(a){return{getScrollBarWidth:function(){var b=a[0].createElement("p");b.style.width="100%",b.style.height="200px";var c=a[0].createElement("div");c.style.position="absolute",c.style.top="0px",c.style.left="0px",c.style.visibility="hidden",c.style.width="200px",c.style.height="150px",c.style.overflow="hidden",c.appendChild(b),a[0].body.appendChild(c);var d=b.offsetWidth;c.style.overflow="scroll";var e=b.offsetWidth;return d===e&&(e=c.clientWidth),a[0].body.removeChild(c),d-e},setColumnsWidth:function(a,b,c){if(a&&b&&c){var d=Math.abs(a/b);angular.forEach(c,function(a){a.left=d*a.originalSize.left,a.width=d*a.originalSize.width,angular.forEach(a.timeFrames,function(a){a.left=d*a.originalSize.left,a.width=d*a.originalSize.width})})}}}}]),gantt.service("ganttMouseButton",[function(){return{getButton:function(a){return a=a||window.event,a.which?a.which:a.button<2?1:4===a.button?2:3}}}]),gantt.service("ganttMouseOffset",[function(){return{getOffset:function(a){return a.offsetX&&a.offsetY?{x:a.offsetX,y:a.offsetY}:a.layerX&&a.layerY?{x:a.layerX,y:a.layerY}:this.getOffsetForElement(a.target,a)},getOffsetForElement:function(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}}}]),gantt.factory("ganttSmartEvent",[function(){function a(a,b,c,d){return a.$on("$destroy",function(){b.unbind(c,d)}),{bindOnce:function(){b.one(c,d)},bind:function(){b.bind(c,d)},unbind:function(){b.unbind(c,d)}}}return a}]),angular.module("gantt.templates",[]).run(["$templateCache",function(a){a.put("template/default.gantt.tmpl.html",'<div class="gantt unselectable" ng-cloak gantt-scroll-manager gantt-element-width-listener>\n    <gantt-labels>\n        <div class="gantt-labels-header">\n            <gantt-row-header></gantt-row-header>\n        </div>\n        <div class="gantt-labels-body"\n             ng-style="(maxHeight > 0 && {\'max-height\': (maxHeight - gantt.header.getHeight())+\'px\'} || {})"\n             ng-show="gantt.columnsManager.columns.length > 0">\n            <div gantt-vertical-scroll-receiver style="position: relative">\n                <gantt-row-label ng-repeat="row in gantt.rowsManager.visibleRows track by $index">\n                    <span class="gantt-labels-text">{{ row.name }}</span>\n                </gantt-row-label>\n            </div>\n        </div>\n    </gantt-labels>\n    <gantt-header>\n        <gantt-header-columns>\n            <div ng-repeat="header in gantt.columnsManager.visibleHeaders">\n                <div class="gantt-header-row gantt-header-row-bottom">\n                    <gantt-column-header ng-repeat="column in header track by $index">\n                        {{ column.label }}\n                    </gantt-column-header>\n                </div>\n            </div>\n        </gantt-header-columns>\n    </gantt-header>\n    <gantt-scrollable>\n        <gantt-body>\n            <div class="gantt-body-background">\n                <div class="gantt-row-height"\n                     ng-class-odd="\'gantt-background-row\'"\n                     ng-class-even="\'gantt-background-row-alt\'"\n                     ng-class="row.classes"\n                     ng-style="{\'background-color\': row.color, \'height\': row.height}"\n                     ng-repeat="row in gantt.rowsManager.visibleRows track by $index">\n                </div>\n            </div>\n            <div class="gantt-body-foreground">\n                <div class="gantt-current-date-line" ng-if="currentDate === \'line\' && gantt.currentDateManager.position >= 0 && gantt.currentDateManager.position <= gantt.width" ng-style="{\'left\': gantt.currentDateManager.position + \'px\' }"></div>\n            </div>\n            <gantt-body-columns class="gantt-body-columns">\n                <gantt-column ng-repeat="column in gantt.columnsManager.visibleColumns track by $index">\n                    <gantt-time-frame ng-repeat="timeFrame in column.visibleTimeFrames"></gantt-time-frame>\n                </gantt-column>\n            </gantt-body-columns>\n            <gantt-body-rows>\n                <div class="gantt-timespan"\n                     ng-style="{\'left\': ((timespan.left-0.3) || timespan.left)+\'px\', \'width\': timespan.width +\'px\', \'z-index\': (timespan.priority || 0)}"\n                     ng-class="timespan.classes"\n                     ng-repeat="timespan in gantt.timespansManager.timespans">\n                </div>\n                <gantt-row ng-repeat="row in gantt.rowsManager.visibleRows track by $index">\n                    <gantt-task ng-repeat="task in row.visibleTasks track by task.id"></gantt-task>\n                </gantt-row>\n            </gantt-body-rows>\n        </gantt-body>\n    </gantt-scrollable>\n\n    <!-- Plugins -->\n    <ng-transclude></ng-transclude>\n\n    <!--\n    ******* Inline templates *******\n    You can specify your own templates by either changing the default ones below or by\n    adding an attribute template-url="<url to your template>" on the specific element.\n    -->\n\n    <!-- Body template -->\n    <script type="text/ng-template" id="template/default.body.tmpl.html">\n        <div ng-transclude class="gantt-body"\n             ng-style="{\'width\': gantt.width +\'px\'}"></div>\n    </script>\n\n    <!-- Header template -->\n    <script type="text/ng-template" id="template/default.header.tmpl.html">\n        <div ng-transclude class="gantt-header"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.getActiveHeadersCount() > 0"\n             ng-style="getHeaderCss()"></div>\n    </script>\n\n    <!-- Row label template -->\n    <script type="text/ng-template" id="template/default.rowLabel.tmpl.html">\n        <div ng-transclude class="gantt-labels-row gantt-row-height"\n             ng-class-odd="\'gantt-background-row\'"\n             ng-class-even="\'gantt-background-row-alt\'"\n             ng-class="row.classes" ng-style="{\'background-color\': row.color, \'height\': row.height}">\n        </div>\n    </script>\n\n    <!-- Row header template -->\n    <script type="text/ng-template" id="template/default.rowHeader.tmpl.html">\n        <div class="gantt-labels-header-row"\n             ng-show="gantt.columnsManager.columns.length > 0 && gantt.columnsManager.getActiveHeadersCount() > 0"\n             ng-style="{\'margin-top\': ((gantt.columnsManager.getActiveHeadersCount()-1)*2)+\'em\'}">\n            <span>Name</span>\n        </div>\n    </script>\n\n    <!-- Labels template -->\n    <script type="text/ng-template" id="template/default.labels.tmpl.html">\n        <div ng-transclude ng-if="showLabelsColumn" class="gantt-labels"\n             ng-style="(labelsWidth > 0 && {\'width\': labelsWidth+\'px\'} || {})"\n             gantt-labels-resize="$parent.allowLabelsResizing"\n             gantt-labels-resize-width="$parent.labelsWidth"\n             gantt-labels-resize-min-width="50"\n             gantt-element-width-listener="$parent.labelsWidth"></div>\n    </script>\n\n    <!-- Header columns template -->\n    <script type="text/ng-template" id="template/default.headerColumns.tmpl.html">\n        <div ng-transclude class="gantt-header-columns"\n              gantt-horizontal-scroll-receiver></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.columnHeader.tmpl.html">\n        <div ng-transclude class="gantt-column-header"\n              ng-style="{\'left\': column.left+\'px\', \'width\': column.width+\'px\'}"></div>\n    </script>\n\n    <!-- Body columns template -->\n    <script type="text/ng-template" id="template/default.bodyColumns.tmpl.html">\n        <div ng-transclude class="gantt-body-columns"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.column.tmpl.html">\n        <div ng-transclude class="gantt-column"\n             ng-class="(column.currentDate && currentDate === \'column\') && \'gantt-foreground-col-current-date\' || \'gantt-foreground-col\'"\n             ng-style="{\'left\': column.left+\'px\', \'width\': column.width+\'px\'}"></div>\n    </script>\n\n    <script type="text/ng-template" id="template/default.timeFrame.tmpl.html">\n        <div class="gantt-timeframe"\n             ng-class="getClass()"\n             ng-style="{\'left\': timeFrame.left + \'px\', \'width\': timeFrame.width + \'px\', \'background-color\': timeFrame.color && timeFrame.color || \'\'}"></div>\n    </script>\n\n    <!-- Scrollable template -->\n    <script type="text/ng-template" id="template/default.scrollable.tmpl.html">\n        <div ng-transclude class="gantt-scrollable" gantt-scroll-sender gantt-limit-updater\n             ng-style="getScrollableCss()"></div>\n    </script>\n\n    <!-- Rows template -->\n    <script type="text/ng-template" id="template/default.bodyRows.tmpl.html">\n        <div ng-transclude class="gantt-body-rows"></div>\n    </script>\n\n    <!-- Task template -->\n    <script type="text/ng-template" id="template/default.task.tmpl.html">\n        <div ng-class="(task.isMilestone === true && [\'gantt-task-milestone\'] || [\'gantt-task\']).concat(task.classes)"\n             ng-style="{\'left\': ((task.isMilestone === true || task.width === 0) && (task.left-0.3) || task.left)+\'px\', \'width\': task.width +\'px\', \'z-index\': (task.isMoving === true && 1  || task.priority || \'\'), \'background-color\': task.color}">\n            <div ng-if="task.truncatedLeft" class="gantt-task-truncated-left"><span>&lt;</span></div>\n            <gantt-task-content></gantt-task-content>\n            <div ng-if="task.truncatedRight" class="gantt-task-truncated-right"><span>&gt;</span></div>\n            <gantt-task-progress ng-if="task.progress !== undefined"></gantt-task-progress>\n        </div>\n    </script>\n\n    <!-- Task content template -->\n    <script type="text/ng-template" id="template/default.taskContent.tmpl.html">\n        <div class="gantt-task-content-container">\n            <div class="gantt-task-content"><span>{{ (task.isMilestone === true && \'&nbsp;\' || task.name) }}</span></div>\n        </div>\n    </script>\n\n    <!-- Task progress template -->\n    <script type="text/ng-template" id="template/default.taskProgress.tmpl.html">\n        <div class=\'gantt-task-progress\' ng-style="getCss()" ng-class="progress.classes"></div>\n    </script>\n\n\n    <!-- Row template -->\n    <script type="text/ng-template" id="template/default.row.tmpl.html">\n        <div ng-transclude class="gantt-row gantt-row-height" ng-style="{\'height\': row.height}"></div>\n    </script>\n\n</div>\n')}]);
//# sourceMappingURL=angular-gantt.min.js.map