{"version":3,"sources":["..\\src\\plugins\\sortable.js"],"names":[],"mappings":"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","file":"angular-gantt-sortable-plugin.js","sourcesContent":["\nangular.module('gantt.sortable', ['gantt']).directive('ganttSortable', ['$document', function($document) {\r\n    // Provides the row sort functionality to any Gantt row\r\n    // Uses the sortableState to share the current row\r\n\r\n    return {\r\n        restrict: 'E',\r\n        require: '^gantt',\r\n        scope: {\r\n            enabled: '=?'\r\n        },\r\n        link: function(scope, element, attrs, ganttCtrl) {\r\n            var api = ganttCtrl.gantt.api;\r\n\r\n            if (scope.enabled === undefined) {\r\n                scope.enabled = true;\r\n            }\r\n\r\n            api.directives.on.new(scope, function(directiveName, rowScope, rowElement) {\r\n                if (directiveName === 'ganttRowLabel') {\r\n                    rowElement.bind('mousedown', function() {\r\n                        if (!scope.enabled) {\r\n                            return;\r\n                        }\r\n\r\n                        enableDragMode();\r\n\r\n                        var disableHandler = function() {\r\n                            rowScope.$apply(function() {\r\n                                angular.element($document[0].body).unbind('mouseup', disableHandler);\r\n                                disableDragMode();\r\n                            });\r\n                        };\r\n                        angular.element($document[0].body).bind('mouseup', disableHandler);\r\n                    });\r\n\r\n                    rowElement.bind('mousemove', function(e) {\r\n                        if (isInDragMode()) {\r\n                            var elementBelowMouse = $document[0].elementFromPoint(e.clientX, e.clientY);\r\n                            elementBelowMouse = angular.element(elementBelowMouse);\r\n                            var targetRow = elementBelowMouse.scope().row;\r\n\r\n                            if (targetRow.id !== scope.startRow.id) {\r\n                                rowScope.$apply(function () {\r\n                                    rowScope.row.rowsManager.swapRows(targetRow, scope.startRow);\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    var isInDragMode = function() {\r\n                        return scope.startRow !== undefined && !angular.equals(rowScope.row, scope.startRow);\r\n                    };\r\n\r\n                    var enableDragMode = function() {\r\n                        scope.startRow = rowScope.row;\r\n                        rowElement.css('cursor', 'move');\r\n                        angular.element($document[0].body).css({\r\n                            '-moz-user-select': '-moz-none',\r\n                            '-webkit-user-select': 'none',\r\n                            '-ms-user-select': 'none',\r\n                            'user-select': 'none',\r\n                            'cursor': 'no-drop'\r\n                        });\r\n                    };\r\n\r\n                    var disableDragMode = function() {\r\n                        scope.startRow = undefined;\r\n                        rowElement.css('cursor', 'pointer');\r\n                        angular.element($document[0].body).css({\r\n                            '-moz-user-select': '',\r\n                            '-webkit-user-select': '',\r\n                            '-ms-user-select': '',\r\n                            'user-select': '',\r\n                            'cursor': 'auto'\r\n                        });\r\n                    };\r\n                }\r\n            });\r\n\r\n        }\r\n    };\r\n}]);\r\n"]}